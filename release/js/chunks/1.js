webpackJsonp([1],{43:function(t,e,i){var s,a;i(44),s=i(46),a=i(55),t.exports=s||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options:t.exports).template=a)},44:function(t,e,i){var s=i(45);"string"==typeof s&&(s=[[t.id,s,""]]);i(34)(s,{});s.locals&&(t.exports=s.locals)},45:function(t,e,i){e=t.exports=i(33)(),e.push([t.id,".nav-pills>li>a[_v-a1dd5cf6]{cursor:pointer}.order-table[_v-a1dd5cf6]{table-layout:fixed}.order-table td[_v-a1dd5cf6],.order-table th[_v-a1dd5cf6]{text-align:center;vertical-align:middle}.order-table td .btn-link[_v-a1dd5cf6]{text-decoration:none;cursor:pointer}.order-table td .btn-link[_v-a1dd5cf6]:hover{text-decoration:underline}","",{version:3,sources:["/./src/views/order/list.vue.style"],names:[],mappings:"AAsHA,6BACA,cAAA,CACA,AAEA,0BACA,kBAAA,CACA,AAEA,0DACA,kBAAA,AACA,qBAAA,CACA,AAEA,uCACA,qBAAA,AACA,cAAA,CACA,AAEA,6CACA,yBAAA,CACA",file:"list.vue",sourcesContent:["<!-- orderList.vue -->\n<template>\n    <div class=\"container-fluid\">\n        <ul class=\"breadcrumb\">\n            <li>订单系统</li>\n            <li>订单管理</li>\n            <li>订单列表</li>\n        </ul>\n        <div class=\"pull-right\">\n            <a class=\"btn btn-info btn-sm\" v-if=\"permissionList.applyInvoice\" v-link=\"{path: '/order/invoice'}\">合并开票</a>\n            <a class=\"btn btn-info btn-sm\" v-if=\"permissionList.createOrder\" v-link=\"{path: '/order/create'}\">下单</a>\n        </div>\n        <ul class=\"nav nav-pills\">\n            <li :class=\"{'active': type === 'UNHANDLED'}\" v-if=\"permissionList.soyyinOrderList\"><a @click=\"getList('UNHANDLED')\">未处理酱印网订单</a></li>\n            <li :class=\"{'active': type === 'ASSIGNED'}\" v-if=\"permissionList.myOrderList\"><a @click=\"getList('ASSIGNED')\">我的订单</a></li>\n            <li :class=\"{'active': type === 'CREATED'}\" v-if=\"permissionList.createByMeOrderList\"><a @click=\"getList('CREATED')\">由我创建</a></li>\n            <li :class=\"{'active': type === 'ALL'}\" v-if=\"permissionList.allOrderList\"><a @click=\"getList('ALL')\">全部订单</a></li>\n        </ul>\n        <p class=\"clearfix\"></p>\n        <table class=\"table table-bordered table-hover order-table\">\n            <thead>\n                <tr>\n                    <th style=\"width:10%;\">订单号</th>\n                    <th style=\"width:8%;\">客户名称</th>\n                    <th style=\"width:8%;\">销售/客服</th>\n                    <th style=\"width:8%;\">创建者</th>\n                    <th style=\"width:15%;\">创建日期</th>\n                    <th style=\"width:12%;\">总价/利润</th>\n                    <th style=\"width:10%;\">订单状态</th>\n                    <th style=\"width:10%;\">开票情况</th>\n                    <th style=\"width:10%;\">付款情况</th>\n                    <th style=\"width:9%;\">操作</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr v-for=\"item of lists\">\n                    <td>{{item.id}}</td>\n                    <td>{{item.customer.name}}</td>\n                    <td>{{item.manager ? item.manager.display_name : ''}}</td>\n                    <td>{{item.creator.type === 'USER' ? '酱印网用户' : item.creator.display_name}}</td>\n                    <td>{{item.create_time | dateFormat}}</td>\n                    <!--\n                    利润的计算中尚未减掉退款金额\n                    -->\n                    <td>{{(item.amount + item.freight) | realPrice}}{{item.is_priced ? '' : '+?'}} / {{(item.status === 'FINISHED' ? (item.amount + item.freight - item.cost - item.extra_cost - item.logistics_cost - item.invoice_logistics_cost) : '') | realPrice}}{{item.status === 'FINISHED' ? '' : '?'}}元</td>\n                    <td v-bind:class=\"{'text-success': item.status === 'FINISHED', 'text-danger': item.status === 'CANCELED'}\">{{item.status | orderStatusFilter}}</td>\n                    <td>{{item.invoiced_amount > 0 ? (item.invoiced_amount === item.amount + item.freight ? '已开票' : '已部分开票') : ''}}</td>\n                    <td>{{item.paid_amount > 0 ? (item.paid_amount === item.amount + item.freight ? '已付款' : Math.round(item.paid_amount / (item.amount + item.freight) *100) + '%') : ''}}</td>\n                    <td><a class=\"btn-link\" v-link=\"{path:'/order/detail/'+item.id}\" target=\"_blank\">查看详情</a></td>\n                </tr>\n            </tbody>\n        </table>\n        <a class=\"btn btn-primary\" v-if=\"sinceId\" @click=\"getList(type, sinceId)\">查看更多</a>\n    </div>\n</template>\n\n<script>\nimport { callback } from '../../store'\nimport { unique } from '../../filters'\n\nexport default {\n    name: 'OrderListView',\n    data() {\n        return {\n            type: '',\n            sinceId: '',\n            lists: [],\n            permissionList: {\n                createOrder: true,\n                applyInvoice: true,\n                soyyinOrderList: true,\n                myOrderList: true,\n                createByMeOrderList: true,\n                allOrderList: true,\n            },\n        }\n    },\n    ready() {\n        if (this.permissionList.soyyinOrderList) {\n            this.getList('UNHANDLED');\n        } else if (this.permissionList.myOrderList) {\n            this.getList('ASSIGNED');\n        } else if (this.permissionList.createByMeOrderList) {\n            this.getList('CREATED');\n        } else if (this.permissionList.allOrderList) {\n            this.getList('ALL');\n        }\n    },\n    methods: {\n        getList(type, sinceId) {\n            this.type = type;\n            var url = '/api/v2/admin/orders/list-v2?type=' + type;\n            if(sinceId){\n                url += '&since_id=' + sinceId;\n            }\n            this.$http.get(url)\n            .then((response) => {\n                if (!response.data.result || response.data.result === 0) {\n                    var arr = [];\n                    if(sinceId){\n                        arr = this.lists.concat(response.data.orders);\n                    } else {\n                        arr = response.data.orders;\n                    }\n                    this.lists = unique(arr);\n                    this.$set(\"sinceId\", response.data.since_id || '');\n                } else {\n                    callback.success(response.data);\n                }\n            },(response) => {\n                callback.error(response);\n            })\n        }\n    }\n}\n</script>\n\n<style scoped>\n.nav-pills > li > a{\n    cursor: pointer;\n}\n\n.order-table {\n    table-layout: fixed;\n}\n\n.order-table th, .order-table td{\n    text-align: center;\n    vertical-align: middle;\n}\n\n.order-table td .btn-link {\n    text-decoration: none;\n    cursor: pointer;\n}\n\n.order-table td .btn-link:hover {\n    text-decoration: underline;\n}\n</style>"],sourceRoot:"webpack://"}])},46:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(47),a=i(23);e["default"]={name:"OrderListView",data:function(){return{type:"",sinceId:"",lists:[],permissionList:{createOrder:!0,applyInvoice:!0,soyyinOrderList:!0,myOrderList:!0,createByMeOrderList:!0,allOrderList:!0}}},ready:function(){this.permissionList.soyyinOrderList?this.getList("UNHANDLED"):this.permissionList.myOrderList?this.getList("ASSIGNED"):this.permissionList.createByMeOrderList?this.getList("CREATED"):this.permissionList.allOrderList&&this.getList("ALL")},methods:{getList:function(t,e){var i=this;this.type=t;var n="/api/v2/admin/orders/list-v2?type="+t;e&&(n+="&since_id="+e),this.$http.get(n).then(function(t){if(t.data.result&&0!==t.data.result)s.callback.success(t.data);else{var n=[];n=e?i.lists.concat(t.data.orders):t.data.orders,i.lists=(0,a.unique)(n),i.$set("sinceId",t.data.since_id||"")}},function(t){s.callback.error(t)})}}}},55:function(t,e){t.exports=' <div class=container-fluid _v-a1dd5cf6=""> <ul class=breadcrumb _v-a1dd5cf6=""> <li _v-a1dd5cf6="">订单系统</li> <li _v-a1dd5cf6="">订单管理</li> <li _v-a1dd5cf6="">订单列表</li> </ul> <div class=pull-right _v-a1dd5cf6=""> <a class="btn btn-info btn-sm" v-if=permissionList.applyInvoice v-link="{path: \'/order/invoice\'}" _v-a1dd5cf6="">合并开票</a> <a class="btn btn-info btn-sm" v-if=permissionList.createOrder v-link="{path: \'/order/create\'}" _v-a1dd5cf6="">下单</a> </div> <ul class="nav nav-pills" _v-a1dd5cf6=""> <li :class="{\'active\': type === \'UNHANDLED\'}" v-if=permissionList.soyyinOrderList _v-a1dd5cf6=""><a @click="getList(\'UNHANDLED\')" _v-a1dd5cf6="">未处理酱印网订单</a></li> <li :class="{\'active\': type === \'ASSIGNED\'}" v-if=permissionList.myOrderList _v-a1dd5cf6=""><a @click="getList(\'ASSIGNED\')" _v-a1dd5cf6="">我的订单</a></li> <li :class="{\'active\': type === \'CREATED\'}" v-if=permissionList.createByMeOrderList _v-a1dd5cf6=""><a @click="getList(\'CREATED\')" _v-a1dd5cf6="">由我创建</a></li> <li :class="{\'active\': type === \'ALL\'}" v-if=permissionList.allOrderList _v-a1dd5cf6=""><a @click="getList(\'ALL\')" _v-a1dd5cf6="">全部订单</a></li> </ul> <p class=clearfix _v-a1dd5cf6=""></p> <table class="table table-bordered table-hover order-table" _v-a1dd5cf6=""> <thead _v-a1dd5cf6=""> <tr _v-a1dd5cf6=""> <th style=width:10% _v-a1dd5cf6="">订单号</th> <th style=width:8% _v-a1dd5cf6="">客户名称</th> <th style=width:8% _v-a1dd5cf6="">销售/客服</th> <th style=width:8% _v-a1dd5cf6="">创建者</th> <th style=width:15% _v-a1dd5cf6="">创建日期</th> <th style=width:12% _v-a1dd5cf6="">总价/利润</th> <th style=width:10% _v-a1dd5cf6="">订单状态</th> <th style=width:10% _v-a1dd5cf6="">开票情况</th> <th style=width:10% _v-a1dd5cf6="">付款情况</th> <th style=width:9% _v-a1dd5cf6="">操作</th> </tr> </thead> <tbody _v-a1dd5cf6=""> <tr v-for="item of lists" _v-a1dd5cf6=""> <td _v-a1dd5cf6="">{{item.id}}</td> <td _v-a1dd5cf6="">{{item.customer.name}}</td> <td _v-a1dd5cf6="">{{item.manager ? item.manager.display_name : \'\'}}</td> <td _v-a1dd5cf6="">{{item.creator.type === \'USER\' ? \'酱印网用户\' : item.creator.display_name}}</td> <td _v-a1dd5cf6="">{{item.create_time | dateFormat}}</td> <td _v-a1dd5cf6="">{{(item.amount + item.freight) | realPrice}}{{item.is_priced ? \'\' : \'+?\'}} / {{(item.status === \'FINISHED\' ? (item.amount + item.freight - item.cost - item.extra_cost - item.logistics_cost - item.invoice_logistics_cost) : \'\') | realPrice}}{{item.status === \'FINISHED\' ? \'\' : \'?\'}}元</td> <td v-bind:class="{\'text-success\': item.status === \'FINISHED\', \'text-danger\': item.status === \'CANCELED\'}" _v-a1dd5cf6="">{{item.status | orderStatusFilter}}</td> <td _v-a1dd5cf6="">{{item.invoiced_amount &gt; 0 ? (item.invoiced_amount === item.amount + item.freight ? \'已开票\' : \'已部分开票\') : \'\'}}</td> <td _v-a1dd5cf6="">{{item.paid_amount &gt; 0 ? (item.paid_amount === item.amount + item.freight ? \'已付款\' : Math.round(item.paid_amount / (item.amount + item.freight) *100) + \'%\') : \'\'}}</td> <td _v-a1dd5cf6=""><a class=btn-link v-link="{path:\'/order/detail/\'+item.id}" target=_blank _v-a1dd5cf6="">查看详情</a></td> </tr> </tbody> </table> <a class="btn btn-primary" v-if=sinceId @click="getList(type, sinceId)" _v-a1dd5cf6="">查看更多</a> </div> '}});
//# sourceMappingURL=1.js.map