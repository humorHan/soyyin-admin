webpackJsonp([14],{228:function(i,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t,t="http://7xsolp.com1.z0.glb.clouddn.com/";n.default=t},230:function(i,n,e){var t,s;e(231),t=e(233),s=e(235),i.exports=t||{},i.exports.__esModule&&(i.exports=i.exports.default),s&&(("function"==typeof i.exports?i.exports.options:i.exports).template=s)},231:function(i,n,e){var t=e(232);"string"==typeof t&&(t=[[i.id,t,""]]);e(40)(t,{});t.locals&&(i.exports=t.locals)},232:function(i,n,e){n=i.exports=e(39)(),n.push([i.id,".red[_v-e1bfb006]{color:red;vertical-align:sub}.w200[_v-e1bfb006]{width:200px}.content[_v-e1bfb006]{border:1px solid #ecf0f1;padding:30px}.form-control[_v-e1bfb006]{display:inline-block;width:auto;height:auto;vertical-align:middle}.upload-cover[_v-e1bfb006],.upload[_v-e1bfb006]{width:112px;height:112px;font-weight:700;font-size:70px;border:2px solid #dce4ec;border-radius:2px;color:#ecf0f1;text-align:center;cursor:pointer;vertical-align:middle;line-height:100px}.products-wrap[_v-e1bfb006]{vertical-align:middle;margin-top:5px;display:inline-block;padding:0}.products-wrap li[_v-e1bfb006]{vertical-align:middle;position:relative;margin-right:30px;display:inline-block;list-style-type:none}.products-wrap li:hover .setFirst[_v-e1bfb006]{display:block}.setFirst[_v-e1bfb006]{display:none;position:absolute;top:90px;width:108px;margin-left:2px;cursor:pointer;z-index:2;background:#fff;color:#000;opacity:.7;text-align:center;font-size:14px}.sub[_v-e1bfb006]{vertical-align:sub}.category[_v-e1bfb006]{margin-right:20px}.mt20[_v-e1bfb006]{margin-top:20px}.middle[_v-e1bfb006]{vertical-align:middle}.font14[_v-e1bfb006]{font-size:14px}.mt15[_v-e1bfb006]{margin-top:15px}","",{version:3,sources:["/./src/views/soyyin/addProduct.vue.style"],names:[],mappings:"AAyGA,kBACA,UAAA,AACA,kBAAA,CACA,AACA,mBACA,WAAA,CACA,AACA,sBACA,yBAAA,AACA,YAAA,CACA,AACA,2BACA,qBAAA,AACA,WAAA,AACA,YAAA,AACA,qBAAA,CACA,AACA,gDACA,YAAA,AACA,aAAA,AACA,gBAAA,AACA,eAAA,AACA,yBAAA,AACA,kBAAA,AACA,cAAA,AACA,kBAAA,AACA,eAAA,AACA,sBAAA,AACA,iBAAA,CACA,AACA,4BACA,sBAAA,AACA,eAAA,AACA,qBAAA,AACA,SAAA,CACA,AACA,+BACA,sBAAA,AACA,kBAAA,AACA,kBAAA,AACA,qBAAA,AACA,oBAAA,CACA,AACA,+CACA,aAAA,CACA,AACA,uBACA,aAAA,AACA,kBAAA,AACA,SAAA,AACA,YAAA,AACA,gBAAA,AACA,eAAA,AACA,UAAA,AACA,gBAAA,AACA,WAAA,AACA,WAAA,AACA,kBAAA,AACA,cAAA,CACA,AACA,kBACA,kBAAA,CACA,AACA,uBACA,iBAAA,CACA,AACA,mBACA,eAAA,CACA,AACA,qBACA,qBAAA,CACA,AACA,qBACA,cAAA,CACA,AACA,mBACA,eAAA,CACA",file:"addProduct.vue",sourcesContent:['<template>\n    <div class="container-fluid">\n        <ul class="breadcrumb">\n            <li>酱印网</li>\n            <li>商品管理</li>\n            <li>添加商品</li>\n        </ul>\n        <h2>添加商品</h2>\n        <div class="content">\n            <div>\n                <h4>商品名称 <span class="red">*</span></h4>\n                <input class="form-control input-sm w200" type="text">\n            </div>\n            <div class="mt20">\n                <h4>所属分组 <span class="red">*</span></h4>\n                <label v-for="item in categories" class="category">\n                    <input class="form-control input-sm" type="checkbox" value="{{item.id}}" v-model="checkedCategoryIds">\n                    <span class="sub">{{item.name}}</span>\n                </label>\n            </div>\n            <div class="mt20">\n                <h4>\n                    封面图片\n                    <span class="middle font14">分辨率要求：40 * 40px</span>\n                </h4>\n                <div class="upload-cover mt15" id="add-cover">+</div>\n            </div>\n            <div class="mt20">\n                <h4>\n                    商品图片\n                    <span class="middle font14">分辨率要求：800 * 800px</span>\n                </h4>\n                <ul class="products-wrap">\n                    <li class="product-item" v-for="item of imgs" track-by="Math.random()">\n                        <div class="upload" id="upload-img{{$index}}">{{{item}}}</div>\n                        <div class="setFirst" v-if="$index != 0" @click="setFirst($index)">设为第一张</div>\n                    </li>\n                </ul>\n                <div class="btn btn-info middle" @click="addImgBtn">添加商品图片</div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import uploadUtil from \'../../util/util-plupload\';\n\n    export default {\n        data() {\n            return {\n                categories: [],\n                checkedCategoryIds: [],\n                imgs: [\'\', \'\', \'\']\n            }\n        },\n        ready(){\n            this.getCategory();\n            this.initUploadImgs();\n            uploadUtil(\'add-cover\');\n        },\n        methods: {\n            getCategory(){\n                this.$http.get(\'/api/v2/admin/products/category-brief-list\')\n                    .then((data) => {\n                        this.categories = data.data.categories;\n                    });\n            },\n            addImgBtn(){\n                if (this.imgs.length < 5) {\n                    this.imgs.push(\'\');\n                    this.$nextTick(function () {\n                        this.initUploadImgs();\n                    });\n                }\n            },\n            initUploadImgs(){\n                $(".upload").map(function (i, item) {\n                    if (!$(item).hasClass("initUpload")) {\n                        uploadUtil($(item)[0].id);\n                        $(item).addClass("initUpload");\n                    }\n                });\n            },\n            setFirst(index){\n                let item = document.getElementsByClassName(\'upload\')[index].innerHTML;\n                console.log(item.indexOf(\'--\'));\n                if (item.indexOf(\'--\') > 0) {\n                    console.log(1,item.slice(0, item.indexOf(\'--\')));\n                    this.imgs.$set(index, item.slice(0, item.indexOf(\'--\') - 2));\n                } else{\n                    this.imgs.$set(index, item.slice(0, item.indexOf(\'--\')));\n                }\n\n                let temp = this.imgs[index];\n                this.imgs.$set(index, this.imgs[0]);\n                this.imgs.$set(0, temp);\n                this.$nextTick(function(){\n                    this.initUploadImgs();\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .red{\n        color: red;\n        vertical-align: sub;\n    }\n    .w200{\n        width: 200px;\n    }\n    .content{\n        border: 1px solid #ecf0f1;\n        padding: 30px;\n    }\n    .form-control{\n        display: inline-block;\n        width: auto;\n        height: auto;\n        vertical-align: middle;\n    }\n    .upload,.upload-cover{\n        width: 112px;\n        height: 112px;\n        font-weight: bold;\n        font-size: 70px;\n        border: 2px solid #dce4ec;\n        border-radius: 2px;\n        color: #ecf0f1;\n        text-align: center;\n        cursor: pointer;\n        vertical-align: middle;\n        line-height: 100px;\n    }\n    .products-wrap{\n        vertical-align: middle;\n        margin-top: 5px;\n        display: inline-block;\n        padding: 0;\n    }\n    .products-wrap li{\n        vertical-align: middle;\n        position: relative;\n        margin-right: 30px;\n        display: inline-block;\n        list-style-type: none;\n    }\n    .products-wrap li:hover .setFirst{\n        display: block;\n    }\n    .setFirst{\n        display: none;\n        position: absolute;\n        top: 90px;\n        width: 108px;\n        margin-left: 2px;\n        cursor: pointer;\n        z-index: 2;\n        background: white;\n        color: black;\n        opacity: .7;\n        text-align: center;\n        font-size: 14px;\n    }\n    .sub{\n        vertical-align: sub;\n    }\n    .category{\n        margin-right: 20px;\n    }\n    .mt20{\n        margin-top: 20px;\n    }\n    .middle{\n        vertical-align: middle;\n    }\n    .font14{\n        font-size: 14px;\n    }\n    .mt15{\n        margin-top: 15px;\n    }\n</style>'],sourceRoot:"webpack://"}])},233:function(i,n,e){"use strict";function t(i){return i&&i.__esModule?i:{default:i}}Object.defineProperty(n,"__esModule",{value:!0});var s=e(234),A=t(s);n.default={data:function(){return{categories:[],checkedCategoryIds:[],imgs:["","",""]}},ready:function(){this.getCategory(),this.initUploadImgs(),(0,A.default)("add-cover")},methods:{getCategory:function(){var i=this;this.$http.get("/api/v2/admin/products/category-brief-list").then(function(n){i.categories=n.data.categories})},addImgBtn:function(){this.imgs.length<5&&(this.imgs.push(""),this.$nextTick(function(){this.initUploadImgs()}))},initUploadImgs:function(){$(".upload").map(function(i,n){$(n).hasClass("initUpload")||((0,A.default)($(n)[0].id),$(n).addClass("initUpload"))})},setFirst:function(i){var n=document.getElementsByClassName("upload")[i].innerHTML;console.log(n.indexOf("--")),n.indexOf("--")>0?(console.log(1,n.slice(0,n.indexOf("--"))),this.imgs.$set(i,n.slice(0,n.indexOf("--")-2))):this.imgs.$set(i,n.slice(0,n.indexOf("--")));var e=this.imgs[i];this.imgs.$set(i,this.imgs[0]),this.imgs.$set(0,e),this.$nextTick(function(){this.initUploadImgs()})}}}},234:function(i,n,e){"use strict";function t(i){return i&&i.__esModule?i:{default:i}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(i,n){Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:i,uptoken_url:"/api/v2/admin/others/uptoken-without-key",get_new_uptoken:!0,unique_names:!1,save_key:!0,domain:A.default,container:n,max_file_size:"100mb",flash_swf_url:"https://cdn.staticfile.org/Plupload/2.1.1/Moxie.swf",filters:{mime_types:[{title:"图片文件",extensions:"jpg,gif,png,bmp,jpeg"}]},max_retries:3,dragdrop:!0,drop_element:"crops",chunk_size:"4mb",auto_start:!0,init:{FilesAdded:function(i,n){plupload.each(n,function(i){})},BeforeUpload:function(i,n){},UploadProgress:function(i,n){},FileUploaded:function(n,e,t){var s=n.getOption("domain"),A=$.parseJSON(t),o=s+A.key,l=$("#"+i).height(),a=$("#"+i).width();$("#"+i).html('<img src="'+o+'" height="'+l+'" width="'+a+'" />').css("font-size",0)},Error:function(i,n,e){alert(e)},UploadComplete:function(){}}})};var s=e(228),A=t(s)},235:function(i,n){i.exports=' <div class=container-fluid _v-e1bfb006=""> <ul class=breadcrumb _v-e1bfb006=""> <li _v-e1bfb006="">酱印网</li> <li _v-e1bfb006="">商品管理</li> <li _v-e1bfb006="">添加商品</li> </ul> <h2 _v-e1bfb006="">添加商品</h2> <div class=content _v-e1bfb006=""> <div _v-e1bfb006=""> <h4 _v-e1bfb006="">商品名称 <span class=red _v-e1bfb006="">*</span></h4> <input class="form-control input-sm w200" type=text _v-e1bfb006=""> </div> <div class=mt20 _v-e1bfb006=""> <h4 _v-e1bfb006="">所属分组 <span class=red _v-e1bfb006="">*</span></h4> <label v-for="item in categories" class=category _v-e1bfb006=""> <input class="form-control input-sm" type=checkbox value={{item.id}} v-model=checkedCategoryIds _v-e1bfb006=""> <span class=sub _v-e1bfb006="">{{item.name}}</span> </label> </div> <div class=mt20 _v-e1bfb006=""> <h4 _v-e1bfb006=""> 封面图片 <span class="middle font14" _v-e1bfb006="">分辨率要求：40 * 40px</span> </h4> <div class="upload-cover mt15" id=add-cover _v-e1bfb006="">+</div> </div> <div class=mt20 _v-e1bfb006=""> <h4 _v-e1bfb006=""> 商品图片 <span class="middle font14" _v-e1bfb006="">分辨率要求：800 * 800px</span> </h4> <ul class=products-wrap _v-e1bfb006=""> <li class=product-item v-for="item of imgs" track-by=Math.random() _v-e1bfb006=""> <div class=upload id=upload-img{{$index}} _v-e1bfb006="">{{{item}}}</div> <div class=setFirst v-if="$index != 0" @click=setFirst($index) _v-e1bfb006="">设为第一张</div> </li> </ul> <div class="btn btn-info middle" @click=addImgBtn _v-e1bfb006="">添加商品图片</div> </div> </div> </div> '}});
//# sourceMappingURL=14.js.map