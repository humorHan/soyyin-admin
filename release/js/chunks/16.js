webpackJsonp([16],{80:function(n,e,i){var t,s;i(81),t=i(83),s=i(84),n.exports=t||{},n.exports.__esModule&&(n.exports=n.exports.default),s&&(("function"==typeof n.exports?n.exports.options:n.exports).template=s)},81:function(n,e,i){var t=i(82);"string"==typeof t&&(t=[[n.id,t,""]]);i(40)(t,{});t.locals&&(n.exports=t.locals)},82:function(n,e,i){e=n.exports=i(39)(),e.push([n.id,".popuptips-container[_v-d1dee2ce]{position:fixed;left:50%;top:40%;z-index:2000}.panel[_v-d1dee2ce]{position:relative;left:-50%}.fade-transition[_v-d1dee2ce]{-webkit-transition:all 1s ease;transition:all 1s ease}.fade-leave[_v-d1dee2ce]{opacity:0}","",{version:3,sources:["/./src/components/popupTips.vue.style"],names:[],mappings:"AAuCA,kCACA,eAAA,AACA,SAAA,AACA,QAAA,AACA,YAAA,CACA,AACA,oBACA,kBAAA,AACA,SAAA,CACA,AAEA,8BACA,+BAAA,sBAAA,CACA,AAEA,yBACA,SAAA,CACA",file:"popupTips.vue",sourcesContent:['<!-- popupTips.vue -->\n<template>\n\t<div class="popuptips-container" v-if="show" transition="fade">\n\t    <div class="panel panel-{{ tipsType }}">\n\t\t\t<div class="panel-heading">\n\t\t   \t\t<h3 class="panel-title">{{ tipsTitle }}</h3>\n\t\t\t</div>\n\t\t\t<div class="panel-body">\n\t\t    \t{{ tipsContent }}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\nexport default {\n    name: \'PopupTipsView\',\n    replace: false,\n    props: {\n    \tshow: Boolean,\n    \ttipsType: String,\n    \ttipsTitle: String,\n    \ttipsContent: String\n    },\n    watch: {\n        show(val, oldVal) {\n            if (val === true) {\n            \tsetTimeout(() => {\n            \t\tthis.show = false;\n            \t}, 1000);\n            }\n        },\n    },\n}\n\n</script>\n\n<style scoped>\n.popuptips-container {\n\tposition: fixed;\n\tleft: 50%;\n\ttop: 40%;\n    z-index: 2000;\n}\n.panel {\n\tposition: relative;\n    left: -50%;\n}\n\n.fade-transition {\n  transition: all 1s ease;\n}\n\n.fade-leave {\n  opacity: 0;\n}\n</style>'],sourceRoot:"webpack://"}])},83:function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"PopupTipsView",replace:!1,props:{show:Boolean,tipsType:String,tipsTitle:String,tipsContent:String},watch:{show:function(n,e){var i=this;n===!0&&setTimeout(function(){i.show=!1},1e3)}}}},84:function(n,e){n.exports=' <div class=popuptips-container v-if=show transition=fade _v-d1dee2ce=""> <div class="panel panel-{{ tipsType }}" _v-d1dee2ce=""> <div class=panel-heading _v-d1dee2ce=""> <h3 class=panel-title _v-d1dee2ce="">{{ tipsTitle }}</h3> </div> <div class=panel-body _v-d1dee2ce=""> {{ tipsContent }} </div> </div> </div> '},228:function(n,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t,t="http://7xsolp.com1.z0.glb.clouddn.com/";e.default=t},234:function(n,e,i){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,e){Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:n,uptoken_url:"/api/v2/admin/others/uptoken-without-key",get_new_uptoken:!0,unique_names:!1,save_key:!0,domain:a.default,container:e,max_file_size:"100mb",flash_swf_url:"https://cdn.staticfile.org/Plupload/2.1.1/Moxie.swf",filters:{mime_types:[{title:"图片文件",extensions:"jpg,gif,png,bmp,jpeg"}]},max_retries:3,dragdrop:!0,drop_element:"crops",chunk_size:"4mb",auto_start:!0,init:{FilesAdded:function(n,e){plupload.each(e,function(n){})},BeforeUpload:function(n,e){},UploadProgress:function(n,e){},FileUploaded:function(e,i,t){var s=e.getOption("domain"),a=$.parseJSON(t),o=s+a.key,l=$("#"+n).height(),d=$("#"+n).width();$("#"+n).html('<img src="'+o+'" height="'+l+'" width="'+d+'" />').css("font-size",0)},Error:function(n,e,i){alert(i)},UploadComplete:function(){}}})};var s=i(228),a=t(s)},240:function(n,e,i){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){function e(){var n=this,e=n.customUploadBtnId,i=n.customUploadContainerId;Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:e,uptoken_url:"/api/v2/admin/others/uptoken-without-key",get_new_uptoken:!0,unique_names:!1,save_key:!0,domain:a.default,container:i,max_file_size:"100mb",flash_swf_url:"https://cdn.staticfile.org/Plupload/2.1.1/Moxie.swf",filters:{mime_types:[{title:"图片文件",extensions:"jpg,gif,png,bmp,jpeg"}]},max_retries:3,dragdrop:!0,drop_element:"crops",chunk_size:"4mb",auto_start:!0,init:{FilesAdded:function(n,e){plupload.each(e,function(n){})},BeforeUpload:function(n,e){},UploadProgress:function(e,i){n.showUploadProgress(i.percent)},FileUploaded:function(e,i,t){var a=e.getOption("domain"),o=$.parseJSON(t),l=a+o.key;n.command(null,"insertHtml",'<img src="'+l+"?imageView/2/w/"+s+'"/>')},Error:function(n,e,i){alert(i)},UploadComplete:function(){n.hideUploadProgress()}}})}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:838,t=new wangEditor(n);t.config.menus=["source","|","bold","underline","italic","strikethrough","eraser","forecolor","bgcolor","|","quote","fontfamily","fontsize","head","unorderlist","orderlist","alignleft","aligncenter","alignright","|","link","unlink","anchor","table","|","img","|","lineheight","indent","|","undo","redo","fullscreen"],t.config.menuFixed=!1,t.config.pasteFilter=!1,t.config.customUpload=!0,t.config.customUploadInit=e,t.create(),t.$txt.html("");var s=i};var s=i(228),a=t(s)},242:function(n,e,i){var t,s;i(243),t=i(245),s=i(246),n.exports=t||{},n.exports.__esModule&&(n.exports=n.exports.default),s&&(("function"==typeof n.exports?n.exports.options:n.exports).template=s)},243:function(n,e,i){var t=i(244);"string"==typeof t&&(t=[[n.id,t,""]]);i(40)(t,{});t.locals&&(n.exports=t.locals)},244:function(n,e,i){e=n.exports=i(39)(),e.push([n.id,".mt20[_v-440cab42]{margin-top:20px}.ml30[_v-440cab42]{margin-left:30px}.upload-case-bg[_v-440cab42]{width:200px;height:100px;line-height:90px}.upload-case-bg[_v-440cab42],.upload-design[_v-440cab42],.upload-materiel[_v-440cab42]{border:2px solid #dce4ec;border-radius:2px;font-weight:700;font-size:70px;color:#ecf0f1;text-align:center;cursor:pointer;vertical-align:middle}.upload-design[_v-440cab42],.upload-materiel[_v-440cab42]{width:112px;height:112px;line-height:100px}.case-name[_v-440cab42],.case-order[_v-440cab42],.case-sub-name[_v-440cab42]{width:200px}.case-describe[_v-440cab42],.company-describe[_v-440cab42]{width:400px;max-width:400px}.bold[_v-440cab42]{font-weight:700}.inline-block[_v-440cab42]{display:inline-block}.middle[_v-440cab42]{vertical-align:middle}.ml10[_v-440cab42]{margin-left:10px}.close[_v-440cab42]{font-size:30px;margin-right:47px;margin-top:10px;outline:none}.company-logo[_v-440cab42]{height:70px;width:70px;line-height:64px;font-size:50px}.company-bg[_v-440cab42],.company-logo[_v-440cab42]{border:2px solid #dce4ec;border-radius:2px;font-weight:700;color:#ecf0f1;text-align:center;cursor:pointer;vertical-align:middle}.company-bg[_v-440cab42]{width:300px;height:80px;line-height:70px;font-size:70px}","",{version:3,sources:["/./src/views/soyyin/case.vue.style"],names:[],mappings:"AA+YA,mBACA,eAAA,CACA,AAEA,mBACA,gBAAA,CACA,AAEA,6BACA,YAAA,AACA,aAAA,AASA,gBAAA,CACA,AAEA,uFAXA,yBAAA,AACA,kBAAA,AACA,gBAAA,AACA,eAAA,AACA,cAAA,AACA,kBAAA,AACA,eAAA,AACA,qBAAA,CAgBA,AAZA,0DACA,YAAA,AACA,aAAA,AASA,iBAAA,CACA,AAEA,6EACA,WAAA,CACA,AAEA,2DACA,YAAA,AACA,eAAA,CACA,AAEA,mBACA,eAAA,CACA,AAEA,2BACA,oBAAA,CACA,AAEA,qBACA,qBAAA,CACA,AAEA,mBACA,gBAAA,CACA,AAEA,oBACA,eAAA,AACA,kBAAA,AACA,gBAAA,AACA,YAAA,CACA,AAEA,2BACA,YAAA,AACA,WAAA,AACA,iBAAA,AACA,cAAA,CAQA,AAEA,oDATA,yBAAA,AACA,kBAAA,AACA,gBAAA,AACA,cAAA,AACA,kBAAA,AACA,eAAA,AACA,qBAAA,CAeA,AAZA,yBACA,YAAA,AACA,YAAA,AACA,iBAAA,AAIA,cAAA,CAKA",file:"case.vue",sourcesContent:['<template>\n    <div class="container-fluid">\n        <ul class="breadcrumb">\n            <li>酱印网</li>\n            <li>案例管理</li>\n            <li>案例</li>\n        </ul>\n        <div class="panel panel-default">\n            <div class="panel-heading">案例简介</div>\n            <div class="panel-body">\n                <div>\n                    <span class="bold inline-block middle">案例背景</span>\n                    <div class="case-bg-wrap inline-block ml10 middle">\n                        <div class="upload-case-bg" id="upload-case-bg">+</div>\n                    </div>\n                </div>\n                <div class="mt20">\n                    <span class="bold inline-block middle">案例封面</span>\n                    <div class="case-bg-wrap inline-block ml10 middle">\n                        <div class="upload-case-bg" id="upload-case-small-bg">+</div>\n                    </div>\n                </div>\n                <div class="mt20">\n                    <span class="bold inline-block">案例标题</span>\n                    <input class="case-name form-control input-sm ml10 inline-block" v-model="caseTitle" type="text"\n                           placeholder="请输入案例标题">\n                </div>\n                <div class="mt20">\n                    <span class="bold inline-block" style="margin-left: 15px;">副标题</span>\n                    <input class="case-sub-name form-control input-sm ml10 inline-block" v-model="caseSubTitle"\n                           type="text" placeholder="请输入案例副标题">\n                </div>\n                <div class="mt20">\n                    <span class="bold inline-block">案例编号</span>\n                    <select class="case-order form-control input-sm ml10 inline-block" v-model="order">\n                        <option>1</option>\n                        <option>2</option>\n                        <option>3</option>\n                        <option>4</option>\n                        <option>5</option>\n                        <option>6</option>\n                    </select>\n                </div>\n                <div class="mt20">\n                    <span class="bold inline-block middle">案例描述</span>\n                    <textarea class="case-describe form-control inline-block ml10 middle" v-model="description"\n                              cols="50" rows="5"></textarea>\n                </div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading">物料品单</div>\n            <div class="panel-body">\n                <ul class="inline-block middle">\n                    <li class="inline-block ml30 middle" v-for="item in materiels">\n                        <input class="materiel form-control input-sm" type="text" style="width: 112px;"\n                               placeholder="请输入物料名称" v-model="item.name">\n                        <input class="materiel-url form-control input-sm mt20" type="text" style="width: 112px;"\n                               placeholder="请输入跳转链接" v-model="item.url">\n                        <div class="upload-materiel-wrap mt20">\n                            <div class="upload-materiel" id="upload-materiel{{$index}}">+</div>\n                        </div>\n                        <button type="button" class="close" @click="reduce(item, materiels)">×</button>\n                    </li>\n                </ul>\n                <div class="btn btn-info middle ml30" @click="addMateriel">增加物料</div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading">设计项目</div>\n            <div class="panel-body">\n                <ul class="inline-block middle">\n                    <li class="inline-block ml30 middle" v-for="item in designs">\n                        <input class="design form-control input-sm" type="text" style="width: 112px;"\n                               placeholder="请输入设计名称" v-model="item.name">\n                        <div class="upload-design-wrap mt20">\n                            <div class="upload-design" id="upload-design{{$index}}">+</div>\n                        </div>\n                        <button type="button" class="close" @click="reduce(item, designs)">×</button>\n                    </li>\n                </ul>\n                <div class="btn btn-info middle ml30" @click="addDesign">增加设计</div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading">案例正文</div>\n            <div class="panel-body">\n                <div id="case-content" style="height: 200px;"></div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading">案例公司</div>\n            <div class="panel-body">\n                <div>\n                    <span class="bold inline-block middle">公司logo</span>\n                    <div class="company-logo inline-block ml10" id="company-logo">+</div>\n                </div>\n                <div class="mt20">\n                    <span class="bold inline-block middle">公司名称</span>\n                    <input class="form-control input-sm inline-block ml10" v-model="custom.name" type="text"\n                           placeholder="请输入公司名称" style="width: 200px;">\n                </div>\n                <div class="mt20">\n                    <span class="bold inline-block middle">公司背景</span>\n                    <div class="company-bg inline-block ml10" id="company-bg">+</div>\n                </div>\n                <div class="mt20">\n                    <span class="bold inline-block">公司简介</span>\n                    <textarea class="company-describe form-control inline-block ml10 middle"\n                              v-model="custom.description" cols="30" rows="4"></textarea>\n                </div>\n            </div>\n        </div>\n        <div class="btn btn-info btn-lg pull-right" @click="addCase">{{handle}}</div>\n        <popup :show.sync="pop.show" :tips-type="pop.type" :tips-title="pop.title" :tips-content="pop.content"></popup>\n    </div>\n</template>\n\n<script>\n    import wangEditorUtil from \'../../util/util-wang-editor\';\n    import uploadUtil from \'../../util/util-plupload\';\n    import cdn from \'../../filters/cdnUrl.js\';\n    import popup from \'../../components/popupTips.vue\'\n\n    export default {\n        name: \'caseView\',\n        components: {\n            popup\n        },\n        data(){\n            return {\n                caseId: \'\',\n                caseTitle: \'\',\n                caseSubTitle: \'\',\n                order: 1,\n                description: \'\',\n                materiels: [\n                    {\n                        name: \'\',\n                        image_key: \'\',\n                        url: \'\'\n                    }\n                ],\n                designs: [\n                    {\n                        name: \'\',\n                        image_key: \'\'\n                    }\n                ],\n                custom: {\n                    name: \'\',\n                    description: \'\'\n                },\n                handle: \'创建案例\',\n                pop: {\n                    show: false,\n                    type: \'danger\',\n                    title: \'\',\n                    content: \'\'\n                }\n            }\n        },\n        beforeCompile(){\n            this.caseId = this.$route.params.id;\n            if (this.caseId) {\n                this.handle = \'更新案例\';\n                this.$http.get(\'/api/v2/admin/others/example-detail\', {id: this.caseId})\n                    .then((dt) => {\n                        var data = dt.data;\n                        this.order = data.order;\n                        this.caseTitle = data.title;\n                        this.caseSubTitle = data.subtitle;\n                        this.description = data.description;\n                        this.custom = data.custom;\n                        $("#case-content").html(data.content);\n                        this.reChoose("upload-case-bg", data.background_key);\n                        this.reChoose("upload-case-small-bg", data.image_key);\n                        this.reChoose("company-logo", data.custom.logo_key);\n                        this.reChoose("company-bg", data.custom.background_key);\n                        this.materiels = data.products;\n                        this.designs = data.designs;\n                        this.$nextTick(function () {\n                            this.uploadMateriel();\n                            this.uploadDesign();\n                            data.products.forEach((item, i) => {\n                                this.reChoose((\'upload-materiel\' + i), item.image_key);\n                            });\n                            data.designs.forEach((item, i) => {\n                                this.reChoose((\'upload-design\' + i), item.image_key);\n                            });\n                        });\n                    })\n            }\n        },\n        ready(){\n            wangEditorUtil(\'case-content\');\n            uploadUtil(\'upload-case-bg\');\n            uploadUtil(\'upload-case-small-bg\');\n            uploadUtil(\'company-logo\');\n            uploadUtil(\'company-bg\');\n            this.uploadMateriel();\n            this.uploadDesign();\n        },\n        methods: {\n            // 更新页面的复选\n            reChoose(dom, bg_key){\n                if (bg_key) {\n                    var $dom = $("#" + dom);\n                    $dom.html(\'<img src="\' + cdn + bg_key + \'" width="\' + $dom.width() + \'" height="\' + $dom.height() + \'"/>\').css("font-size", 0);\n                }\n            },\n            reduce(item, arr){\n                arr.$remove(item);\n            },\n            addMateriel(){\n                if (this.materiels.length < 5) {\n                    this.materiels.push({\n                        name: \'\',\n                        image_key: \'\',\n                        url: \'\'\n                    });\n                    this.$nextTick(function () {\n                        this.uploadMateriel();\n                    });\n                }\n            },\n            addDesign(){\n                if (this.designs.length < 5) {\n                    this.designs.push({\n                        name: \'\',\n                        image_key: \'\'\n                    });\n                    this.$nextTick(function () {\n                        this.uploadDesign();\n                    });\n                }\n            },\n            uploadMateriel(){\n                $(".upload-materiel").map(function (i, item) {\n                    if (!$(item).hasClass("initUpload")) {\n                        uploadUtil($(item)[0].id);\n                        $(item).addClass("initUpload");\n                    }\n                });\n            },\n            uploadDesign(){\n                $(".upload-design").map(function (i, item) {\n                    if (!$(item).hasClass("initUpload")) {\n                        uploadUtil($(item)[0].id);\n                        $(item).addClass("initUpload");\n                    }\n                });\n            },\n            wrongPop(content, title){\n                this.pop.title = title || \'输入有误\';\n                this.pop.content = content;\n                this.pop.show = true;\n            },\n            addCase(){\n                var isSubmit = true;\n                var $smallBg = $("#upload-case-small-bg").find("img").attr("src");\n                var $bg = $("#upload-case-bg").find("img").attr("src");\n                // 除了物料+设计 都是必填了\n                $(".upload-materiel").each((i, $item) => {\n                    if ($item && $($item).find("img") && $($item).find("img").attr("src")) {\n                        var temp = $($item).find("img").attr("src");\n                        this.materiels[i].image_key = temp.substring(temp.lastIndexOf(\'\\/\') + 1);\n                    } else {\n                        isSubmit = false;\n                    }\n                });\n                $(".upload-design").each((i, $item) => {\n                    if ($item && $($item).find("img") && $($item).find("img").attr("src")) {\n                        var temp = $($item).find("img").attr("src");\n                        this.designs[i].image_key = temp.substring(temp.lastIndexOf(\'\\/\') + 1);\n                    } else {\n                        isSubmit = false;\n                    }\n                });\n                if ($("#company-logo").find("img") && $("#company-logo").find("img").attr("src")) {\n                    var companyLogo = $("#company-logo").find("img").attr("src");\n                    this.custom.logo_key = companyLogo.substring(companyLogo.lastIndexOf(\'\\/\') + 1);\n                }\n                if ($("#company-bg").find("img") && $("#company-bg").find("img").attr("src")) {\n                    var companyBg = $("#company-bg").find("img").attr("src");\n                    this.custom.background_key = companyBg.substring(companyBg.lastIndexOf(\'\\/\') + 1);\n                }\n                /*if (!($smallBg && $bg && this.order && this.caseTitle && this.caseSubTitle && this.description && $("#case-content").html() && companyLogo && companyBg && this.custom.name && this.custom.description)) {\n                    alert (\'还有必填项未填写！\');\n                    isSubmit = false;\n                }*/\n\n                if (!$bg) {\n                    this.wrongPop(\'请上传案例背景\');\n                    return false;\n                }\n                if (!$smallBg) {\n                    this.wrongPop(\'请上传案例封面\');\n                    return false;\n                }\n                if (!this.caseTitle) {\n                    this.wrongPop(\'请输入案例标题\');\n                    return false;\n                }\n                if (!this.caseSubTitle) {\n                    this.wrongPop(\'请输入案例副标题\');\n                    return false;\n                }\n                if (this.description.length == 0) {\n                    this.wrongPop(\'请输入案例描述\');\n                    return false;\n                } else if (this.description.length > 160) {\n                    this.wrongPop(\'案例描述最多160字符\');\n                    return false;\n                }\n                if ($("#case-content").html().length == 0) {\n                    this.wrongPop(\'请输入案例正文\');\n                    return false;\n                } else if (this.description.length > 160) {\n                    this.wrongPop(\'案例正文最多160字符\');\n                    return false;\n                }\n                if (!companyLogo) {\n                    this.wrongPop(\'请上传公司logo\');\n                    return false;\n                }\n                if (!companyBg) {\n                    this.wrongPop(\'请上传公司背景\');\n                    return false;\n                }\n                if (!this.custom.name) {\n                    this.wrongPop(\'请输入公司名称\');\n                    return false;\n                }\n                if (!this.custom.description) {\n                    this.wrongPop(\'请输入公司描述\');\n                    return false;\n                }\n\n                this.materiels.forEach((item) => {\n                    if (!(item.image_key && item.name && item.url)) {\n                        isSubmit = false;\n                        this.wrongPop(\'请输入物料品单信息\');\n                        return false;\n                    }\n                });\n\n                this.designs.forEach((item) => {\n                    if (!(item.image_key && item.name)) {\n                        isSubmit = false;\n                        this.wrongPop(\'请输入设计项目信息\');\n                        return false;\n                    }\n                });\n                if (!isSubmit) {\n                    return false;\n                }\n                var params = JSON.stringify({\n                    group_id: 1,\n                    order: +this.order,\n                    title: this.caseTitle,\n                    subtitle: this.caseSubTitle,\n                    image_key: $smallBg.substring($smallBg.lastIndexOf(\'\\/\') + 1),\n                    background_key: $bg.substring($bg.lastIndexOf(\'\\/\') + 1),\n                    description: this.description,\n                    products: this.materiels,\n                    designs: this.designs,\n                    content: $("#case-content").html(),\n                    custom: this.custom\n                });\n                if (this.caseId && isSubmit) {\n                    var tThis = this;\n                    $.ajax({\n                        type: \'PUT\',\n                        contentType: \'application/json\',\n                        url: \'/api/v2/admin/others/update-example?id=\'+ this.caseId,\n                        data: params,\n                        success: function (data) {\n                            tThis.$route.router.go({ path: \'/soyyin/cases/\'});\n                        }\n                    });\n                } else if (isSubmit) {\n                    var tThis = this;\n                    $.ajax({\n                        type: \'POST\',\n                        contentType: \'application/json\',\n                        url: \'/api/v2/admin/others/create-example\',\n                        data: params,\n                        success: function (data) {\n                            tThis.$route.router.go({ path: \'/soyyin/cases/\'});\n                        }\n                    });\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .mt20 {\n        margin-top: 20px;\n    }\n\n    .ml30 {\n        margin-left: 30px;\n    }\n\n    .upload-case-bg {\n        width: 200px;\n        height: 100px;\n        border: 2px solid #dce4ec;\n        border-radius: 2px;\n        font-weight: bold;\n        font-size: 70px;\n        color: #ecf0f1;\n        text-align: center;\n        cursor: pointer;\n        vertical-align: middle;\n        line-height: 90px;\n    }\n\n    .upload-materiel, .upload-design {\n        width: 112px;\n        height: 112px;\n        font-weight: bold;\n        font-size: 70px;\n        border: 2px solid #dce4ec;\n        border-radius: 2px;\n        color: #ecf0f1;\n        text-align: center;\n        cursor: pointer;\n        vertical-align: middle;\n        line-height: 100px;\n    }\n\n    .case-name, .case-order, .case-sub-name {\n        width: 200px;\n    }\n\n    .case-describe, .company-describe {\n        width: 400px;\n        max-width: 400px;\n    }\n\n    .bold {\n        font-weight: bold;\n    }\n\n    .inline-block {\n        display: inline-block;\n    }\n\n    .middle {\n        vertical-align: middle;\n    }\n\n    .ml10 {\n        margin-left: 10px;\n    }\n\n    .close{\n        font-size: 30px;\n        margin-right: 47px;\n        margin-top: 10px;\n        outline: none;\n    }\n\n    .company-logo {\n        height: 70px;\n        width: 70px;\n        line-height: 64px;\n        font-size: 50px;\n        border: 2px solid #dce4ec;\n        border-radius: 2px;\n        font-weight: bold;\n        color: #ecf0f1;\n        text-align: center;\n        cursor: pointer;\n        vertical-align: middle;\n    }\n\n    .company-bg {\n        width: 300px;\n        height: 80px;\n        line-height: 70px;\n        border: 2px solid #dce4ec;\n        border-radius: 2px;\n        font-weight: bold;\n        font-size: 70px;\n        color: #ecf0f1;\n        text-align: center;\n        cursor: pointer;\n        vertical-align: middle;\n    }\n</style>'],sourceRoot:"webpack://"}])},245:function(n,e,i){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),a=t(s),o=i(240),l=t(o),d=i(234),c=t(d),p=i(228),r=t(p),m=i(80),u=t(m);e.default={name:"caseView",components:{popup:u.default},data:function(){return{caseId:"",caseTitle:"",caseSubTitle:"",order:1,description:"",materiels:[{name:"",image_key:"",url:""}],designs:[{name:"",image_key:""}],custom:{name:"",description:""},handle:"创建案例",pop:{show:!1,type:"danger",title:"",content:""}}},beforeCompile:function(){var n=this;this.caseId=this.$route.params.id,this.caseId&&(this.handle="更新案例",this.$http.get("/api/v2/admin/others/example-detail",{id:this.caseId}).then(function(e){var i=e.data;n.order=i.order,n.caseTitle=i.title,n.caseSubTitle=i.subtitle,n.description=i.description,n.custom=i.custom,$("#case-content").html(i.content),n.reChoose("upload-case-bg",i.background_key),n.reChoose("upload-case-small-bg",i.image_key),n.reChoose("company-logo",i.custom.logo_key),n.reChoose("company-bg",i.custom.background_key),n.materiels=i.products,n.designs=i.designs,n.$nextTick(function(){var n=this;this.uploadMateriel(),this.uploadDesign(),i.products.forEach(function(e,i){n.reChoose("upload-materiel"+i,e.image_key)}),i.designs.forEach(function(e,i){n.reChoose("upload-design"+i,e.image_key)})})}))},ready:function(){(0,l.default)("case-content"),(0,c.default)("upload-case-bg"),(0,c.default)("upload-case-small-bg"),(0,c.default)("company-logo"),(0,c.default)("company-bg"),this.uploadMateriel(),this.uploadDesign()},methods:{reChoose:function(n,e){if(e){var i=$("#"+n);i.html('<img src="'+r.default+e+'" width="'+i.width()+'" height="'+i.height()+'"/>').css("font-size",0)}},reduce:function(n,e){e.$remove(n)},addMateriel:function(){this.materiels.length<5&&(this.materiels.push({name:"",image_key:"",url:""}),this.$nextTick(function(){this.uploadMateriel()}))},addDesign:function(){this.designs.length<5&&(this.designs.push({name:"",image_key:""}),this.$nextTick(function(){this.uploadDesign()}))},uploadMateriel:function(){$(".upload-materiel").map(function(n,e){$(e).hasClass("initUpload")||((0,c.default)($(e)[0].id),$(e).addClass("initUpload"))})},uploadDesign:function(){$(".upload-design").map(function(n,e){$(e).hasClass("initUpload")||((0,c.default)($(e)[0].id),$(e).addClass("initUpload"))})},wrongPop:function(n,e){this.pop.title=e||"输入有误",this.pop.content=n,this.pop.show=!0},addCase:function(){var n=this,e=!0,i=$("#upload-case-small-bg").find("img").attr("src"),t=$("#upload-case-bg").find("img").attr("src");if($(".upload-materiel").each(function(i,t){if(t&&$(t).find("img")&&$(t).find("img").attr("src")){var s=$(t).find("img").attr("src");n.materiels[i].image_key=s.substring(s.lastIndexOf("/")+1)}else e=!1}),$(".upload-design").each(function(i,t){if(t&&$(t).find("img")&&$(t).find("img").attr("src")){var s=$(t).find("img").attr("src");n.designs[i].image_key=s.substring(s.lastIndexOf("/")+1)}else e=!1}),$("#company-logo").find("img")&&$("#company-logo").find("img").attr("src")){var s=$("#company-logo").find("img").attr("src");this.custom.logo_key=s.substring(s.lastIndexOf("/")+1)}if($("#company-bg").find("img")&&$("#company-bg").find("img").attr("src")){var o=$("#company-bg").find("img").attr("src");this.custom.background_key=o.substring(o.lastIndexOf("/")+1)}if(!t)return this.wrongPop("请上传案例背景"),!1;if(!i)return this.wrongPop("请上传案例封面"),!1;if(!this.caseTitle)return this.wrongPop("请输入案例标题"),!1;if(!this.caseSubTitle)return this.wrongPop("请输入案例副标题"),!1;if(0==this.description.length)return this.wrongPop("请输入案例描述"),!1;if(this.description.length>160)return this.wrongPop("案例描述最多160字符"),!1;if(0==$("#case-content").html().length)return this.wrongPop("请输入案例正文"),!1;if(this.description.length>160)return this.wrongPop("案例正文最多160字符"),!1;if(!s)return this.wrongPop("请上传公司logo"),!1;if(!o)return this.wrongPop("请上传公司背景"),!1;if(!this.custom.name)return this.wrongPop("请输入公司名称"),!1;if(!this.custom.description)return this.wrongPop("请输入公司描述"),!1;if(this.materiels.forEach(function(i){if(!(i.image_key&&i.name&&i.url))return e=!1,n.wrongPop("请输入物料品单信息"),!1}),this.designs.forEach(function(i){if(!i.image_key||!i.name)return e=!1,n.wrongPop("请输入设计项目信息"),!1}),!e)return!1;var l=(0,a.default)({group_id:1,order:+this.order,title:this.caseTitle,subtitle:this.caseSubTitle,image_key:i.substring(i.lastIndexOf("/")+1),background_key:t.substring(t.lastIndexOf("/")+1),description:this.description,products:this.materiels,designs:this.designs,content:$("#case-content").html(),
custom:this.custom});if(this.caseId&&e){var d=this;$.ajax({type:"PUT",contentType:"application/json",url:"/api/v2/admin/others/update-example?id="+this.caseId,data:l,success:function(n){d.$route.router.go({path:"/soyyin/cases/"})}})}else if(e){var d=this;$.ajax({type:"POST",contentType:"application/json",url:"/api/v2/admin/others/create-example",data:l,success:function(n){d.$route.router.go({path:"/soyyin/cases/"})}})}}}}},246:function(n,e){n.exports=' <div class=container-fluid _v-440cab42=""> <ul class=breadcrumb _v-440cab42=""> <li _v-440cab42="">酱印网</li> <li _v-440cab42="">案例管理</li> <li _v-440cab42="">案例</li> </ul> <div class="panel panel-default" _v-440cab42=""> <div class=panel-heading _v-440cab42="">案例简介</div> <div class=panel-body _v-440cab42=""> <div _v-440cab42=""> <span class="bold inline-block middle" _v-440cab42="">案例背景</span> <div class="case-bg-wrap inline-block ml10 middle" _v-440cab42=""> <div class=upload-case-bg id=upload-case-bg _v-440cab42="">+</div> </div> </div> <div class=mt20 _v-440cab42=""> <span class="bold inline-block middle" _v-440cab42="">案例封面</span> <div class="case-bg-wrap inline-block ml10 middle" _v-440cab42=""> <div class=upload-case-bg id=upload-case-small-bg _v-440cab42="">+</div> </div> </div> <div class=mt20 _v-440cab42=""> <span class="bold inline-block" _v-440cab42="">案例标题</span> <input class="case-name form-control input-sm ml10 inline-block" v-model=caseTitle type=text placeholder=请输入案例标题 _v-440cab42=""> </div> <div class=mt20 _v-440cab42=""> <span class="bold inline-block" style="margin-left: 15px" _v-440cab42="">副标题</span> <input class="case-sub-name form-control input-sm ml10 inline-block" v-model=caseSubTitle type=text placeholder=请输入案例副标题 _v-440cab42=""> </div> <div class=mt20 _v-440cab42=""> <span class="bold inline-block" _v-440cab42="">案例编号</span> <select class="case-order form-control input-sm ml10 inline-block" v-model=order _v-440cab42=""> <option _v-440cab42="">1</option> <option _v-440cab42="">2</option> <option _v-440cab42="">3</option> <option _v-440cab42="">4</option> <option _v-440cab42="">5</option> <option _v-440cab42="">6</option> </select> </div> <div class=mt20 _v-440cab42=""> <span class="bold inline-block middle" _v-440cab42="">案例描述</span> <textarea class="case-describe form-control inline-block ml10 middle" v-model=description cols=50 rows=5 _v-440cab42=""></textarea> </div> </div> </div> <div class="panel panel-default" _v-440cab42=""> <div class=panel-heading _v-440cab42="">物料品单</div> <div class=panel-body _v-440cab42=""> <ul class="inline-block middle" _v-440cab42=""> <li class="inline-block ml30 middle" v-for="item in materiels" _v-440cab42=""> <input class="materiel form-control input-sm" type=text style="width: 112px" placeholder=请输入物料名称 v-model=item.name _v-440cab42=""> <input class="materiel-url form-control input-sm mt20" type=text style="width: 112px" placeholder=请输入跳转链接 v-model=item.url _v-440cab42=""> <div class="upload-materiel-wrap mt20" _v-440cab42=""> <div class=upload-materiel id=upload-materiel{{$index}} _v-440cab42="">+</div> </div> <button type=button class=close @click="reduce(item, materiels)" _v-440cab42="">×</button> </li> </ul> <div class="btn btn-info middle ml30" @click=addMateriel _v-440cab42="">增加物料</div> </div> </div> <div class="panel panel-default" _v-440cab42=""> <div class=panel-heading _v-440cab42="">设计项目</div> <div class=panel-body _v-440cab42=""> <ul class="inline-block middle" _v-440cab42=""> <li class="inline-block ml30 middle" v-for="item in designs" _v-440cab42=""> <input class="design form-control input-sm" type=text style="width: 112px" placeholder=请输入设计名称 v-model=item.name _v-440cab42=""> <div class="upload-design-wrap mt20" _v-440cab42=""> <div class=upload-design id=upload-design{{$index}} _v-440cab42="">+</div> </div> <button type=button class=close @click="reduce(item, designs)" _v-440cab42="">×</button> </li> </ul> <div class="btn btn-info middle ml30" @click=addDesign _v-440cab42="">增加设计</div> </div> </div> <div class="panel panel-default" _v-440cab42=""> <div class=panel-heading _v-440cab42="">案例正文</div> <div class=panel-body _v-440cab42=""> <div id=case-content style="height: 200px" _v-440cab42=""></div> </div> </div> <div class="panel panel-default" _v-440cab42=""> <div class=panel-heading _v-440cab42="">案例公司</div> <div class=panel-body _v-440cab42=""> <div _v-440cab42=""> <span class="bold inline-block middle" _v-440cab42="">公司logo</span> <div class="company-logo inline-block ml10" id=company-logo _v-440cab42="">+</div> </div> <div class=mt20 _v-440cab42=""> <span class="bold inline-block middle" _v-440cab42="">公司名称</span> <input class="form-control input-sm inline-block ml10" v-model=custom.name type=text placeholder=请输入公司名称 style="width: 200px" _v-440cab42=""> </div> <div class=mt20 _v-440cab42=""> <span class="bold inline-block middle" _v-440cab42="">公司背景</span> <div class="company-bg inline-block ml10" id=company-bg _v-440cab42="">+</div> </div> <div class=mt20 _v-440cab42=""> <span class="bold inline-block" _v-440cab42="">公司简介</span> <textarea class="company-describe form-control inline-block ml10 middle" v-model=custom.description cols=30 rows=4 _v-440cab42=""></textarea> </div> </div> </div> <div class="btn btn-info btn-lg pull-right" @click=addCase _v-440cab42="">{{handle}}</div> <popup :show.sync=pop.show :tips-type=pop.type :tips-title=pop.title :tips-content=pop.content _v-440cab42=""></popup> </div> '}});
//# sourceMappingURL=16.js.map