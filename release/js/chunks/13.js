webpackJsonp([13],{224:function(t,e,i){var n,s;i(225),n=i(227),s=i(229),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports.default),s&&(("function"==typeof t.exports?t.exports.options:t.exports).template=s)},225:function(t,e,i){var n=i(226);"string"==typeof n&&(n=[[t.id,n,""]]);i(40)(n,{});n.locals&&(t.exports=n.locals)},226:function(t,e,i){e=t.exports=i(39)(),e.push([t.id,"table.table tr td[_v-59d5f4f3]{line-height:53px;text-align:center}table.table a[_v-59d5f4f3]{text-decoration:none}table.table a[_v-59d5f4f3]:hover{text-decoration:underline}.pointer[_v-59d5f4f3]{cursor:pointer}","",{version:3,sources:["/./src/views/soyyin/productManagement.vue.style"],names:[],mappings:"AA0KA,+BACA,iBAAA,AACA,iBAAA,CACA,AACA,2BACA,oBAAA,CACA,AACA,iCACA,yBAAA,CACA,AACA,sBACA,cAAA,CACA",file:"productManagement.vue",sourcesContent:['<!-- productManagement.vue -->\n<template>\n    <div class="container-fluid">\n        <div v-if="permissionList.viewProduct">\n            <ul class="breadcrumb">\n                <li>酱印网</li>\n                <li>商品管理</li>\n                <li>商品列表</li>\n            </ul>\n            <div class="pull-right">\n                <a class="btn btn-info btn-sm" v-if="permissionList.addProduct" v-link="{path: \'/soyyin/addProduct\'}">添加商品</a>\n            </div>\n            <ul class="nav nav-pills">\n                <li :class="{active : type === \'ON_SALE\'}" class="pointer">\n                    <a @click="getList(\'ON_SALE\')">出售中</a>\n                </li>\n                <li :class="{active : type === \'all\'}" class="pointer">\n                    <a @click="getList(\'all\')">全部商品</a>\n                </li>\n            </ul>\n            <form class="form-inline" style="margin-top: 20px;">\n                <label class="control-label">筛选：</label>\n                <select class="form-control input-sm" v-model="category_id" style="width: 120px;">\n                    <option :value="0">全部</option>\n                    <option v-for="item of categories" :value="item.id">{{item.name}}</option>\n                </select>\n                <span class="btn btn-info btn-sm" @click="getList(type)" style="margin-left: 20px;">查询</span>\n            </form>\n            <table class="table table-bordered table-hover order-table" style="margin-top: 30px;">\n                <thead>\n                    <tr>\n                        <td>商品ID</td>\n                        <td>商品名称</td>\n                        <td>所属分组</td>\n                        <td>封面图片</td>\n                        <td>状态</td>\n                        <td style="width: 20%;">操作</td>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr v-for="(index, item) of lists">\n                        <td>{{item.id}}</td>\n                        <td>{{item.name}}</td>\n                        <td>{{item.categories | groups}}</td>\n                        <td>\n                            <img :src="item.cover_key | getCdnUrl">\n                        </td>\n                        <td>{{item.status | getStatus}}</td>\n                        <td>\n                            <a href="javascript:;" v-if="permissionList.stickProduct && index != 0" @click="getTop(item.id)" style="margin-right: 30px;">在分组中置顶</a>\n                            <a href="javascript:;">查看详情</a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <span class="btn btn-primary" v-if="since_id" @click="getList(type, true)">查看更多</span>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {permissionValidator} from \'../../store/rolePermission.js\';\n    import cdnUrl from \'../../filters/cdnUrl.js\'\n\n    export default {\n        name: \'ProductManagementView\',\n        data() {\n            return {\n                category_id: \'0\',\n                type: \'\',\n                since_id: \'\',\n                lists: [],\n                categories: [],\n                permissionList: {\n                    viewProduct: permissionValidator.soyyinWebsite.products.view(),\n                    addProduct: permissionValidator.soyyinWebsite.products.addProduct(),\n                    stickProduct: permissionValidator.soyyinWebsite.products.stickProduct(),\n                }\n            }\n        },\n        ready(){\n            this.getList(\'ON_SALE\');\n            this.getCategory();\n        },\n        filters: {\n            groups(value){\n                var len = value.length;\n                if (len === 0) {\n                    return \'\';\n                }\n                var str = \'\';\n                value.forEach(function(item, i){\n                    if (i != len - 1) {\n                        str += item.name + \'、\';\n                    } else {\n                        str = item.name\n                    }\n                });\n                return  str;\n            },\n            getCdnUrl(key){\n                if (!key) {\n                    return \'\';\n                }\n                return cdnUrl + key;\n            },\n            getStatus(id){\n                switch(id){\n                    case \'CREATED\':\n                        return \'已创建\';\n                    case \'ON_SALE\':\n                        return \'正在出售\';\n                    case \'OFF_SHELF\':\n                        return \'已下架\';\n                    case \'DELETED\':\n                        return \'已删除\';\n                    default:\n                        return \'未知商品\';\n                }\n            }\n        },\n        methods: {\n            getList(type, isMore){\n                this.type = type;\n                if (!isMore) {\n                    this.since_id = \'\';\n                }\n                var url = \'/api/v2/admin/products/list?\';\n                if (type === \'ON_SALE\') {\n                    url += \'status=ON_SALE&\';\n                }\n                if (this.category_id != 0) {\n                    url += \'category_id=\' + this.category_id + \'&\';\n                }\n                if (this.since_id) {\n                    url += \'since_id=\' + this.since_id;\n                }\n                this.$http.get(url)\n                    .then((data) => {\n                        this.since_id = data.data.since_id;\n                        if (!isMore) {\n                            this.lists = this.lists = data.data.products;\n                        } else {\n                            this.lists = this.lists.concat(data.data.products);\n                        }\n                    });\n            },\n            getCategory(){\n                this.$http.get(\'/api/v2/admin/products/category-brief-list\')\n                    .then((data) => {\n                        this.categories = data.data.categories;\n                    });\n            },\n            getTop(id){\n                if (this.category_id != 0) {\n                    this.$http.put(\'/api/v2/admin/products/set-top?product_id=\' + id + \'&category_id=\' + this.category_id)\n                        .then((data) => {\n                            if (data.data.result == 0) {\n                                this.getList(this.type);\n                            }\n                        });\n                } else {\n                    alert (\'全部分类没有置顶概念\');\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    table.table tr td{\n        line-height: 53px;\n        text-align: center;\n    }\n    table.table a{\n        text-decoration: none;\n    }\n    table.table a:hover{\n        text-decoration: underline;\n    }\n    .pointer{\n        cursor: pointer;\n    }\n</style>'],sourceRoot:"webpack://"}])},227:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=i(43),a=i(228),r=n(a);e.default={name:"ProductManagementView",data:function(){return{category_id:"0",type:"",since_id:"",lists:[],categories:[],permissionList:{viewProduct:s.permissionValidator.soyyinWebsite.products.view(),addProduct:s.permissionValidator.soyyinWebsite.products.addProduct(),stickProduct:s.permissionValidator.soyyinWebsite.products.stickProduct()}}},ready:function(){this.getList("ON_SALE"),this.getCategory()},filters:{groups:function(t){var e=t.length;if(0===e)return"";var i="";return t.forEach(function(t,n){n!=e-1?i+=t.name+"、":i=t.name}),i},getCdnUrl:function(t){return t?r.default+t:""},getStatus:function(t){switch(t){case"CREATED":return"已创建";case"ON_SALE":return"正在出售";case"OFF_SHELF":return"已下架";case"DELETED":return"已删除";default:return"未知商品"}}},methods:{getList:function(t,e){var i=this;this.type=t,e||(this.since_id="");var n="/api/v2/admin/products/list?";"ON_SALE"===t&&(n+="status=ON_SALE&"),0!=this.category_id&&(n+="category_id="+this.category_id+"&"),this.since_id&&(n+="since_id="+this.since_id),this.$http.get(n).then(function(t){i.since_id=t.data.since_id,e?i.lists=i.lists.concat(t.data.products):i.lists=i.lists=t.data.products})},getCategory:function(){var t=this;this.$http.get("/api/v2/admin/products/category-brief-list").then(function(e){t.categories=e.data.categories})},getTop:function(t){var e=this;0!=this.category_id?this.$http.put("/api/v2/admin/products/set-top?product_id="+t+"&category_id="+this.category_id).then(function(t){0==t.data.result&&e.getList(e.type)}):alert("全部分类没有置顶概念")}}}},228:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,n="http://7xsolp.com1.z0.glb.clouddn.com/";e.default=n},229:function(t,e){t.exports=' <div class=container-fluid _v-59d5f4f3=""> <div v-if=permissionList.viewProduct _v-59d5f4f3=""> <ul class=breadcrumb _v-59d5f4f3=""> <li _v-59d5f4f3="">酱印网</li> <li _v-59d5f4f3="">商品管理</li> <li _v-59d5f4f3="">商品列表</li> </ul> <div class=pull-right _v-59d5f4f3=""> <a class="btn btn-info btn-sm" v-if=permissionList.addProduct v-link="{path: \'/soyyin/addProduct\'}" _v-59d5f4f3="">添加商品</a> </div> <ul class="nav nav-pills" _v-59d5f4f3=""> <li :class="{active : type === \'ON_SALE\'}" class=pointer _v-59d5f4f3=""> <a @click="getList(\'ON_SALE\')" _v-59d5f4f3="">出售中</a> </li> <li :class="{active : type === \'all\'}" class=pointer _v-59d5f4f3=""> <a @click="getList(\'all\')" _v-59d5f4f3="">全部商品</a> </li> </ul> <form class=form-inline style="margin-top: 20px" _v-59d5f4f3=""> <label class=control-label _v-59d5f4f3="">筛选：</label> <select class="form-control input-sm" v-model=category_id style="width: 120px" _v-59d5f4f3=""> <option :value=0 _v-59d5f4f3="">全部</option> <option v-for="item of categories" :value=item.id _v-59d5f4f3="">{{item.name}}</option> </select> <span class="btn btn-info btn-sm" @click=getList(type) style="margin-left: 20px" _v-59d5f4f3="">查询</span> </form> <table class="table table-bordered table-hover order-table" style="margin-top: 30px" _v-59d5f4f3=""> <thead _v-59d5f4f3=""> <tr _v-59d5f4f3=""> <td _v-59d5f4f3="">商品ID</td> <td _v-59d5f4f3="">商品名称</td> <td _v-59d5f4f3="">所属分组</td> <td _v-59d5f4f3="">封面图片</td> <td _v-59d5f4f3="">状态</td> <td style="width: 20%" _v-59d5f4f3="">操作</td> </tr> </thead> <tbody _v-59d5f4f3=""> <tr v-for="(index, item) of lists" _v-59d5f4f3=""> <td _v-59d5f4f3="">{{item.id}}</td> <td _v-59d5f4f3="">{{item.name}}</td> <td _v-59d5f4f3="">{{item.categories | groups}}</td> <td _v-59d5f4f3=""> <img :src="item.cover_key | getCdnUrl" _v-59d5f4f3=""> </td> <td _v-59d5f4f3="">{{item.status | getStatus}}</td> <td _v-59d5f4f3=""> <a href=javascript:; v-if="permissionList.stickProduct &amp;&amp; index != 0" @click=getTop(item.id) style="margin-right: 30px" _v-59d5f4f3="">在分组中置顶</a> <a href=javascript:; _v-59d5f4f3="">查看详情</a> </td> </tr> </tbody> </table> <span class="btn btn-primary" v-if=since_id @click="getList(type, true)" _v-59d5f4f3="">查看更多</span> </div> </div> '}});
//# sourceMappingURL=13.js.map