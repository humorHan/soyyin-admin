webpackJsonp([12],{70:function(t,e,i){var a,o;i(71),a=i(73),o=i(74),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports.default),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},71:function(t,e,i){var a=i(72);"string"==typeof a&&(a=[[t.id,a,""]]);i(40)(a,{});a.locals&&(t.exports=a.locals)},72:function(t,e,i){e=t.exports=i(39)(),e.push([t.id,".modal[_v-93eabb2e]{height:100%}.modal-dialog[_v-93eabb2e]{top:30%}","",{version:3,sources:["/./src/components/popupDialog.vue.style"],names:[],mappings:"AAwDA,oBACA,WAAA,CACA,AAEA,2BACA,OAAA,CACA",file:"popupDialog.vue",sourcesContent:['<!-- popupDialog.vue -->\n<template>\n    <div class="modal" v-show="showDialog">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" @click="closeDialog">&times;</button>\n                    <h4 class="modal-title">{{ dialogTitle }}</h4>\n                </div>\n                <div class="modal-body">\n                    <p>{{ dialogContent }}</p>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-default" @click="clickNegativeButton">{{ negativeButtonText }}</button>\n        \t\t\t<button type="button" class="btn btn-primary" @click="clickPositiveButton">{{ positiveButtonText }}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    name: \'PopupDialogView\',\n    props: {\n    \tshowDialog: Boolean,\n    \tdialogTitle: String,\n    \tdialogContent: String,\n    \tnegativeButtonText: {\n    \t\ttype: String,\n    \t\tdefault: \'取消\'\n    \t},\n    \tpositiveButtonText: {\n    \t\ttype: String,\n    \t\tdefault: \'确定\'\n    \t},\n    },\n    methods: {\n    \tcloseDialog(event) {\n    \t\tthis.showDialog = false;\n    \t},\n    \tclickPositiveButton(event) {\n    \t\tthis.showDialog = false;\n    \t\tthis.$dispatch(\'click-positive-button\');\n    \t},\n    \tclickNegativeButton(event) {\n    \t\tthis.showDialog = false;\n    \t\tthis.$dispatch(\'click-negative-button\');\n    \t},\n    },\n}\n\n</script>\n\n<style scoped>\n.modal {\n\theight: 100%;\n}\n\n.modal-dialog {\n\ttop: 30%;\n}\n\n</style>'],sourceRoot:"webpack://"}])},73:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"PopupDialogView",props:{showDialog:Boolean,dialogTitle:String,dialogContent:String,negativeButtonText:{type:String,default:"取消"},positiveButtonText:{type:String,default:"确定"}},methods:{closeDialog:function(t){this.showDialog=!1},clickPositiveButton:function(t){this.showDialog=!1,this.$dispatch("click-positive-button")},clickNegativeButton:function(t){this.showDialog=!1,this.$dispatch("click-negative-button")}}}},74:function(t,e){t.exports=' <div class=modal v-show=showDialog _v-93eabb2e=""> <div class=modal-dialog _v-93eabb2e=""> <div class=modal-content _v-93eabb2e=""> <div class=modal-header _v-93eabb2e=""> <button type=button class=close @click=closeDialog _v-93eabb2e="">×</button> <h4 class=modal-title _v-93eabb2e="">{{ dialogTitle }}</h4> </div> <div class=modal-body _v-93eabb2e=""> <p _v-93eabb2e="">{{ dialogContent }}</p> </div> <div class=modal-footer _v-93eabb2e=""> <button type=button class="btn btn-default" @click=clickNegativeButton _v-93eabb2e="">{{ negativeButtonText }}</button> <button type=button class="btn btn-primary" @click=clickPositiveButton _v-93eabb2e="">{{ positiveButtonText }}</button> </div> </div> </div> </div> '},80:function(t,e,i){var a,o;i(81),a=i(83),o=i(84),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports.default),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},81:function(t,e,i){var a=i(82);"string"==typeof a&&(a=[[t.id,a,""]]);i(40)(a,{});a.locals&&(t.exports=a.locals)},82:function(t,e,i){e=t.exports=i(39)(),e.push([t.id,".popuptips-container[_v-d1dee2ce]{position:fixed;left:50%;top:40%;z-index:2000}.panel[_v-d1dee2ce]{position:relative;left:-50%}.fade-transition[_v-d1dee2ce]{-webkit-transition:all 1s ease;transition:all 1s ease}.fade-leave[_v-d1dee2ce]{opacity:0}","",{version:3,sources:["/./src/components/popupTips.vue.style"],names:[],mappings:"AAuCA,kCACA,eAAA,AACA,SAAA,AACA,QAAA,AACA,YAAA,CACA,AACA,oBACA,kBAAA,AACA,SAAA,CACA,AAEA,8BACA,+BAAA,sBAAA,CACA,AAEA,yBACA,SAAA,CACA",file:"popupTips.vue",sourcesContent:['<!-- popupTips.vue -->\n<template>\n\t<div class="popuptips-container" v-if="show" transition="fade">\n\t    <div class="panel panel-{{ tipsType }}">\n\t\t\t<div class="panel-heading">\n\t\t   \t\t<h3 class="panel-title">{{ tipsTitle }}</h3>\n\t\t\t</div>\n\t\t\t<div class="panel-body">\n\t\t    \t{{ tipsContent }}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\nexport default {\n    name: \'PopupTipsView\',\n    replace: false,\n    props: {\n    \tshow: Boolean,\n    \ttipsType: String,\n    \ttipsTitle: String,\n    \ttipsContent: String\n    },\n    watch: {\n        show(val, oldVal) {\n            if (val === true) {\n            \tsetTimeout(() => {\n            \t\tthis.show = false;\n            \t}, 1000);\n            }\n        },\n    },\n}\n\n</script>\n\n<style scoped>\n.popuptips-container {\n\tposition: fixed;\n\tleft: 50%;\n\ttop: 40%;\n    z-index: 2000;\n}\n.panel {\n\tposition: relative;\n    left: -50%;\n}\n\n.fade-transition {\n  transition: all 1s ease;\n}\n\n.fade-leave {\n  opacity: 0;\n}\n</style>'],sourceRoot:"webpack://"}])},83:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"PopupTipsView",replace:!1,props:{show:Boolean,tipsType:String,tipsTitle:String,tipsContent:String},watch:{show:function(t,e){var i=this;t===!0&&setTimeout(function(){i.show=!1},1e3)}}}},84:function(t,e){t.exports=' <div class=popuptips-container v-if=show transition=fade _v-d1dee2ce=""> <div class="panel panel-{{ tipsType }}" _v-d1dee2ce=""> <div class=panel-heading _v-d1dee2ce=""> <h3 class=panel-title _v-d1dee2ce="">{{ tipsTitle }}</h3> </div> <div class=panel-body _v-d1dee2ce=""> {{ tipsContent }} </div> </div> </div> '},85:function(t,e){"use strict";function i(t){var e={};return e.ok=!1,t?t.length>20?(e.errorMsg="产品名称长度不能大于20",e):(e.ok=!0,e):(e.errorMsg="产品名称不能为空",e)}function a(t){var e={};return e.ok=!1,t?t.length>12?(e.errorMsg="产品数量长度不能大于12",e):(e.ok=!0,e):(e.errorMsg="产品数量不能为空",e)}function o(t){var e={};return e.ok=!1,!t||t<0?(e.errorMsg="产品价格不能为空且必须为正数",e):(e.ok=!0,e)}function n(t){var e={};return e.ok=!1,t?t.length>20?(e.errorMsg="客户名称长度不能大于20",e):(e.ok=!0,e):(e.errorMsg="客户名称不能为空",e)}function s(t){var e={};return e.ok=!1,t?t.length>20?(e.errorMsg="收货人名称长度不能大于20",e):(e.ok=!0,e):(e.errorMsg="收货人名称不能为空",e)}function r(t){var e={};e.ok=!1;var i=/^[0-9]{11}$/;return t?i.test(t)?(e.ok=!0,e):(e.errorMsg="收货人手机格式有误",e):(e.errorMsg="收货人手机不能为空",e)}function l(t,e){var i={};return i.ok=!1,0===t?(i.errorMsg="请选择收货人所在地省市区",i):e?e.length>50?(i.errorMsg="收货人详细地址不能大于50",i):(i.ok=!0,i):(i.errorMsg="收货人详细地址不能为空",i)}function d(t){var e={};return e.ok=!1,!t||t<0?(e.errorMsg="开票金额不能为空且必须为正数",e):(e.ok=!0,e)}function p(t,e){var i={};return i.ok=!1,e?e.length>50?(i.errorMsg=t+"长度不能大于50",i):(i.ok=!0,i):(i.errorMsg=t+"不能为空",i)}function u(t,e){var i={};return i.ok=!1,void 0===t||null===t||""===t?(i.errorMsg="使用额度不能为空",i):t<=0||t>e?(i.errorMsg="使用额度必须为正数且不能超过"+e/100+"元",i):(i.ok=!0,i)}function c(t,e){var i={};return i.ok=!1,void 0===t||null===t||""===t?(i.errorMsg="补充金额不能为空",i):t<=e?(i.errorMsg="补充金额必须大于"+e/100+"元",i):(i.ok=!0,i)}function v(t){var e={};return e.ok=!1,void 0===t||null===t||""===t?(e.errorMsg="额外成本不能为空",e):t<0?(e.errorMsg="额外成本必须大于等于0",e):(e.ok=!0,e)}function h(t,e){var i={};return i.ok=!1,e?e.length>2e3?(i.errorMsg=t+"长度不能大于2000",i):(i.ok=!0,i):(i.errorMsg=t+"不能为空",i)}function g(t,e){var i={};return i.ok=!1,t?t<0?(i.errorMsg="成本必须大于0",i):(i.ok=!0,i):e?(i.ok=!0,i):(i.errorMsg="成本不能为空或者0",i)}function m(t){var e={};return e.ok=!1,void 0===t||null===t||""===t?(e.errorMsg="物流成本不能为空",e):t<0?(e.errorMsg="物流成本必须大于等于0",e):(e.ok=!0,e)}function f(t,e){var i={};return i.ok=!1,e?e.length>2e3?(i.errorMsg=t+"长度不能大于2000",i):(i.ok=!0,i):(i.errorMsg=t+"不能为空",i)}function b(t,e){var i={};return i.ok=!1,!t||t<0?(i.errorMsg="退款金额不能为空且必须为正数",i):t>e?(i.errorMsg="退款金额不能大于"+e/100+"元",i):(i.ok=!0,i)}function A(t){var e={};return e.ok=!1,t?t.length>50?(e.errorMsg="对方账号长度不能大于50",e):(e.ok=!0,e):(e.errorMsg="对方账号不能为空",e)}function S(t){var e={};return e.ok=!1,t?t.length>2e3?(e.errorMsg="退款原因长度不能大于2000",e):(e.ok=!0,e):(e.errorMsg="退款原因不能为空",e)}function y(t,e){var i={};return i.ok=!1,!t||t<0?(i.errorMsg="付款金额不能为空且必须为正数",i):t>e?(i.errorMsg="付款金额不能大于该订单剩余的待支付金额("+e/100+"元)",i):(i.ok=!0,i)}function _(t){var e={};return e.ok=!1,t?t.length>20?(e.errorMsg="供应商名称长度不能大于20",e):(e.ok=!0,e):(e.errorMsg="供应商名称不能为空",e)}function k(t){var e={};return e.ok=!1,t?t.length>20?(e.errorMsg="真实姓名长度不能大于20",e):(e.ok=!0,e):(e.errorMsg="真实姓名不能为空",e)}function D(t){var e={};return e.ok=!1,t?t.length>50?(e.errorMsg="用户名长度不能大于50",e):(e.ok=!0,e):(e.errorMsg="用户名不能为空",e)}function w(t){var e={};e.ok=!1;var i=/^[a-zA-Z0-9]*$/;return t?t.length>20?(e.errorMsg="密码长度不能超过20",e):i.test(t)?(e.ok=!0,e):(e.errorMsg="密码只能包含英文字母和数字",e):(e.errorMsg="密码不能为空",e)}Object.defineProperty(e,"__esModule",{value:!0});var E="******";e.orderValidator={validateProductName:i,validateProductQuantity:a,validateProductPrice:o,validateCustomerName:n,validateConsigneeName:s,validateConsigneePhone:r,validateConsigneeAddress:l,validateInvoiceAmount:d,validateInvoiceItem:p,validateApplyInvoiceAmount:u,validateExtraAmount:c,validateExtraCost:v,validateAfterSaleItem:h,validateProductCost:g,validateLogisticsCost:m,validateLogisticsItem:f,validateRefundAmount:b,validateRefundAccount:A,validateRefundReason:S},e.financeValidator={validatePaymentAmount:y},e.crmValidator={validateSupplierName:_,validateDisplayName:k,validateUserName:D,validatePassword:w,DEFAULT_PASSWORD:E}},214:function(t,e,i){var a,o;i(215),a=i(217),o=i(223),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports.default),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},215:function(t,e,i){var a=i(216);"string"==typeof a&&(a=[[t.id,a,""]]);i(40)(a,{});a.locals&&(t.exports=a.locals)},216:function(t,e,i){e=t.exports=i(39)(),e.push([t.id,",.supplier-table[_v-3ed58512]{table-layout:fixed}.supplier-table td[_v-3ed58512],.supplier-table th[_v-3ed58512]{text-align:center;vertical-align:middle}.supplier-table td .btn-link[_v-3ed58512]{text-decoration:none;cursor:pointer}.supplier-table td .btn-link[_v-3ed58512]:hover{text-decoration:underline}","",{version:3,sources:["/./src/views/crm/suppliers.vue.style"],names:[],mappings:"AA8JA,8BACA,kBAAA,CACA,AAEA,gEACA,kBAAA,AACA,qBAAA,CACA,AAEA,0CACA,qBAAA,AACA,cAAA,CACA,AAEA,gDACA,yBAAA,CACA",file:"suppliers.vue",sourcesContent:['<!-- suppliers.vue -->\n<template>\n    <div class="container-fluid">\n        <ul class="breadcrumb">\n            <li>CRM系统</li>\n            <li>供应商管理</li>\n        </ul>\n        <a class="pull-right btn btn-info btn-sm" v-if="permissionList.addSupplier" @click="addSupplier">添加供应商</a>\n        <p class="clearfix"></p>\n        <table class="table table-bordered table-hover supplier-table">\n            <thead>\n                <tr>\n                    <th style="width:5%;">ID</th>\n                    <th style="width:12%;">供应商名称</th>\n                    <th style="width:16%;">供应商品</th>\n                    <th style="width:15%;">覆盖范围</th>\n                    <th style="width:15%;">所在地</th>\n                    <th style="width:12%;">联系人</th>\n                    <th style="width:12%;">下单数量/金额</th>\n                    <th style="width:13%;">操作</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr v-for="supplierItem of supplierList">\n                    <td>{{supplierItem.id}}</td>\n                    <td>{{supplierItem.name}}</td>\n                    <td>{{supplierItem.product}}</td>\n                    <td>{{supplierItem.region}}</td>\n                    <td>{{supplierItem.address}}</td>\n                    <td>{{supplierItem.contact}}</td>\n                    <td>{{supplierItem.order_count}}/{{supplierItem.total_cost | realPrice}}元</td>\n                    <td>\n                        <a class="btn-link" v-if="permissionList.editSupplier" @click="editSupplier(supplierItem)">编辑</a>\n                        <a class="btn-link" style="margin-left:20px;" v-if="permissionList.deleteSupplier" @click="showDeleteSupplierDialog(supplierItem)">删除</a>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n        <edit-or-add-supplier-dialog :show.sync="dataForEditOrAddSupplierDialog.show" :data="dataForEditOrAddSupplierDialog.data"></edit-or-add-supplier-dialog>\n        <popup-dialog :show-dialog.sync="dataForPopupDialog.show" :dialog-title="dataForPopupDialog.title" :dialog-content="dataForPopupDialog.content"></popup-dialog>\n    </div>\n</template>\n\n<script>\nimport popupDialog from \'../../components/popupDialog.vue\'\nimport editOrAddSupplierDialog from \'./comp/editOrAddSupplierDialog.vue\'\nimport { callback } from \'../../store/index.js\'\nimport { permissionValidator } from \'../../store/rolePermission.js\'\n\nconst DELETE_SUPPLIER = "DELETE_SUPPLIER";\n\nexport default {\n    name: \'CrmSuppliersView\',\n    components: {\n        popupDialog,\n        editOrAddSupplierDialog,\n    },\n    data() {\n        return {\n            supplierList: [],\n            permissionList: {\n                view: permissionValidator.crmSystem.supplier.view(),\n                addSupplier: permissionValidator.crmSystem.supplier.addSupplier(),\n                deleteSupplier: permissionValidator.crmSystem.supplier.deleteSupplier(),\n                editSupplier: permissionValidator.crmSystem.supplier.editSupplier(),\n            },\n            dataForEditOrAddSupplierDialog: {\n                show: false,\n                data: {\n                    supplierId: \'\',\n                    name: \'\',\n                    product: \'\',\n                    region: \'\',\n                    address: \'\',\n                    contact: \'\',\n                },\n            },\n            dataForPopupDialog: {\n                show: false,\n                title: \'删除确认\',\n                content: \'\',\n            },\n        }\n    },\n    ready() {\n        if (this.permissionList.view) {\n            this.getList();\n        }\n    },\n    events: {\n        \'click-positive-button\'() {\n            if (this.dataForPopupDialog.dialogId === DELETE_SUPPLIER) {\n                this.deleteSupplier(this.dataForPopupDialog.passingData);\n            }\n        },\n        \'add-supplier\'() {\n            location.reload();\n        },\n        \'edit-supplier\'() {\n            location.reload();\n        },\n    },\n    methods: {\n        getList() {\n            var url = \'/api/v2/admin/suppliers/list\';\n            this.$http.get(url)\n            .then((response) => {\n                if (!response.data.result || response.data.result === 0) {\n                    this.supplierList = response.data.suppliers;\n                } else {\n                    callback.success(response.data);\n                }\n            },(response) => {\n                callback.error(response);\n            })\n        },\n        addSupplier() {\n            this.dataForEditOrAddSupplierDialog.show = true;\n            this.dataForEditOrAddSupplierDialog.data.supplierId = \'\';\n            this.dataForEditOrAddSupplierDialog.data.name = \'\';\n            this.dataForEditOrAddSupplierDialog.data.product = \'\';\n            this.dataForEditOrAddSupplierDialog.data.region = \'\';\n            this.dataForEditOrAddSupplierDialog.data.address = \'\';\n            this.dataForEditOrAddSupplierDialog.data.contact = \'\';\n        },\n        editSupplier(supplierItem) {\n            this.dataForEditOrAddSupplierDialog.show = true;\n            this.dataForEditOrAddSupplierDialog.data.supplierId = supplierItem.id;\n            this.dataForEditOrAddSupplierDialog.data.name = supplierItem.name;\n            this.dataForEditOrAddSupplierDialog.data.product = supplierItem.product;\n            this.dataForEditOrAddSupplierDialog.data.region = supplierItem.region;\n            this.dataForEditOrAddSupplierDialog.data.address = supplierItem.address;\n            this.dataForEditOrAddSupplierDialog.data.contact = supplierItem.contact;\n        },\n        showDeleteSupplierDialog(supplierItem) {\n            this.dataForPopupDialog.show = true;\n            this.dataForPopupDialog.content = "确定删除此供应商？";\n            this.dataForPopupDialog.dialogId = DELETE_SUPPLIER;\n            this.dataForPopupDialog.passingData = supplierItem;\n        },\n        deleteSupplier(supplierItem) {\n            var url = \'/api/v2/admin/suppliers/delete?id=\' + supplierItem.id;\n            this.$http.delete(url)\n            .then((response) => {\n                if(!response.data.result || response.data.result === 0){\n                    location.reload();\n                } else {\n                    callback.success(response.data);\n                }\n            },(response) => {\n                callback.error(response);\n            });\n        },\n    }\n}\n</script>\n\n<style scoped>\n.supplier-table, {\n    table-layout: fixed;\n}\n\n.supplier-table td, .supplier-table th {\n    text-align: center;\n    vertical-align: middle;\n}\n\n.supplier-table td .btn-link {\n    text-decoration: none;\n    cursor: pointer;\n}\n\n.supplier-table td .btn-link:hover {\n    text-decoration: underline;\n}\n</style>'],sourceRoot:"webpack://"}])},217:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(70),n=a(o),s=i(218),r=a(s),l=i(46),d=i(43),p="DELETE_SUPPLIER";e.default={name:"CrmSuppliersView",components:{popupDialog:n.default,editOrAddSupplierDialog:r.default},data:function(){return{supplierList:[],permissionList:{view:d.permissionValidator.crmSystem.supplier.view(),addSupplier:d.permissionValidator.crmSystem.supplier.addSupplier(),deleteSupplier:d.permissionValidator.crmSystem.supplier.deleteSupplier(),editSupplier:d.permissionValidator.crmSystem.supplier.editSupplier()},dataForEditOrAddSupplierDialog:{show:!1,data:{supplierId:"",name:"",product:"",region:"",address:"",contact:""}},dataForPopupDialog:{show:!1,title:"删除确认",content:""}}},ready:function(){this.permissionList.view&&this.getList()},events:{"click-positive-button":function(){this.dataForPopupDialog.dialogId===p&&this.deleteSupplier(this.dataForPopupDialog.passingData)},"add-supplier":function(){location.reload()},"edit-supplier":function(){location.reload()}},methods:{getList:function(){var t=this,e="/api/v2/admin/suppliers/list";this.$http.get(e).then(function(e){e.data.result&&0!==e.data.result?l.callback.success(e.data):t.supplierList=e.data.suppliers},function(t){l.callback.error(t)})},addSupplier:function(){this.dataForEditOrAddSupplierDialog.show=!0,this.dataForEditOrAddSupplierDialog.data.supplierId="",this.dataForEditOrAddSupplierDialog.data.name="",this.dataForEditOrAddSupplierDialog.data.product="",this.dataForEditOrAddSupplierDialog.data.region="",this.dataForEditOrAddSupplierDialog.data.address="",this.dataForEditOrAddSupplierDialog.data.contact=""},editSupplier:function(t){this.dataForEditOrAddSupplierDialog.show=!0,this.dataForEditOrAddSupplierDialog.data.supplierId=t.id,this.dataForEditOrAddSupplierDialog.data.name=t.name,this.dataForEditOrAddSupplierDialog.data.product=t.product,this.dataForEditOrAddSupplierDialog.data.region=t.region,this.dataForEditOrAddSupplierDialog.data.address=t.address,this.dataForEditOrAddSupplierDialog.data.contact=t.contact},showDeleteSupplierDialog:function(t){this.dataForPopupDialog.show=!0,this.dataForPopupDialog.content="确定删除此供应商？",this.dataForPopupDialog.dialogId=p,this.dataForPopupDialog.passingData=t},deleteSupplier:function(t){var e="/api/v2/admin/suppliers/delete?id="+t.id;this.$http.delete(e).then(function(t){t.data.result&&0!==t.data.result?l.callback.success(t.data):location.reload()},function(t){l.callback.error(t)})}}}},218:function(t,e,i){var a,o;i(219),a=i(221),o=i(222),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports.default),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},219:function(t,e,i){var a=i(220);"string"==typeof a&&(a=[[t.id,a,""]]);i(40)(a,{});a.locals&&(t.exports=a.locals)},220:function(t,e,i){e=t.exports=i(39)(),e.push([t.id,".modal[_v-98580cf0]{height:100%}.modal-dialog[_v-98580cf0]{top:20%}","",{version:3,sources:["/./src/views/crm/comp/editOrAddSupplierDialog.vue.style"],names:[],mappings:"AA2KA,oBACA,WAAA,CACA,AAEA,2BACA,OAAA,CACA",file:"editOrAddSupplierDialog.vue",sourcesContent:['<!-- editOrAddSupplierDialog.vue -->\n<template>\n    <div class="modal" v-show="show">\n    \t<div class="modal-dialog">\n            <div class="modal-content">\n            \t<div class="modal-header">\n                    <button type="button" class="close" @click="closeDialog">&times;</button>\n                    <h4 class="modal-title">{{title}}</h4>\n                </div>\n                <div class="modal-body">\n                    <form class="form-horizontal">\n                        <div class="form-group">\n                            <label class="col-lg-4 control-label" for="supplierName">供应商名称<span class="text-danger">*</span>：</label>\n                            <div class="col-lg-6">\n                                <input class="form-control input-sm" id="supplierName" type="text" v-model="data.name">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="col-lg-4 control-label" for="supplyProduct">供应商品：</label>\n                            <div class="col-lg-6">\n                                <input class="form-control input-sm" id="supplyProduct" type="text" v-model="data.product">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="col-lg-4 control-label" for="supplyArea">覆盖范围：</label>\n                            <div class="col-lg-6">\n                                <input class="form-control input-sm" id="supplyArea" type="text" v-model="data.region">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="col-lg-4 control-label" for="supplierAddress">所在地址：</label>\n                            <div class="col-lg-6">\n                                <input class="form-control input-sm" id="supplierAddress" type="text" v-model="data.address">\n                            </div>\n                        </div>\n                        <div class="form-group">\n                            <label class="col-lg-4 control-label" for="supplierContact">联系人：</label>\n                            <div class="col-lg-6">\n                                <input class="form-control input-sm" id="supplierContact" type="text" v-model="data.contact">\n                            </div>\n                        </div>\n                    </form>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-primary" :disabled="!buttonEnabled" @click="confirmSubmit">确定</button>\n                </div>\n            </div>\n        </div>\n        <popup-tips :show.sync="dataForPopupTips.show" :tips-type="dataForPopupTips.type" :tips-title="dataForPopupTips.title" :tips-content="dataForPopupTips.content"></popup-tips>\n    </div>\n</template>\n\n<script>\nimport popupTips from \'../../../components/popupTips.vue\'\nimport { callback } from \'../../../store\'\nimport { crmValidator } from \'../../../store/dataValidator.js\'\n\nexport default {\n    name: \'EditOrAddSupplierDialogView\',\n    components: {\n        popupTips,\n    },\n    props: [\'show\', \'data\'],\n    data() {\n        return {\n        \tbuttonEnabled: true,\n            dataForPopupTips: {\n                show: false,\n                type: \'danger\',\n                title: \'\',\n                content: \'\',\n            },\n        }\n    },\n    computed: {\n        title() {\n            if (this.data.supplierId) {\n                return \'编辑供应商\';\n            } else {\n                return \'新增供应商\';\n            }\n        },\n    },\n    methods: {\n    \tvalidateSuppliers() {\n            var result = crmValidator.validateSupplierName(this.data.name);\n            if (!result.ok) {\n                return result.errorMsg;\n            }\n            return;\n        },\n        confirmSubmit() {\n            if (this.buttonEnabled) {\n                this.buttonEnabled = false;\n                if (this.data.supplierId) {\n                    this.editSuppliers();\n                } else {\n                    this.addSuppliers();\n                }\n            }\n        },\n        addSuppliers() {\n        \tvar result = this.validateSuppliers();\n            if(result) {\n                this.dataForPopupTips.show = true;\n                this.dataForPopupTips.title = \'输入有误\';\n                this.dataForPopupTips.content = result;\n                this.buttonEnabled = true;\n                return;\n            }\n            var url = \'/api/v2/admin/suppliers/add\';\n            var data = {\n                name: this.data.name,\n                product: this.data.product,\n                region: this.data.region,\n                address: this.data.address,\n                contact: this.data.contact,\n            };\n            this.$http.post(url, data)\n            .then((response) => {\n                if(!response.data.result || response.data.result === 0) {\n                    this.show = false;\n                    this.$dispatch(\'add-supplier\');\n                } else {\n                    callback.success(response.data);\n                }\n                this.buttonEnabled = true;\n            },(response) => {\n                callback.error(response);\n                this.buttonEnabled = true;\n            });\n        },\n    \teditSuppliers() {\n            var result = this.validateSuppliers();\n            if(result) {\n                this.dataForPopupTips.show = true;\n                this.dataForPopupTips.title = \'输入有误\';\n                this.dataForPopupTips.content = result;\n                this.buttonEnabled = true;\n                return;\n            }\n            var url = \'/api/v2/admin/suppliers/edit?id=\' + this.data.supplierId;\n            var data = {\n                name: this.data.name,\n                product: this.data.product,\n                region: this.data.region,\n                address: this.data.address,\n                contact: this.data.contact,\n            };\n            this.$http.put(url, data)\n            .then((response) => {\n                if(!response.data.result || response.data.result === 0) {\n                    this.show = false;\n                    this.$dispatch(\'edit-supplier\');\n                } else {\n                    callback.success(response.data);\n                }\n                this.buttonEnabled = true;\n            },(response) => {\n                callback.error(response);\n                this.buttonEnabled = true;\n            });\n        },\n    \tcloseDialog() {\n            this.show = false;\n        },\n    }\n}\n</script>\n\n<style scoped>\n.modal {\n    height: 100%;\n}\n\n.modal-dialog {\n    top: 20%;\n}\n\n</style>'],sourceRoot:"webpack://"}])},221:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(80),n=a(o),s=i(46),r=i(85);e.default={name:"EditOrAddSupplierDialogView",components:{popupTips:n.default},props:["show","data"],data:function(){return{buttonEnabled:!0,dataForPopupTips:{show:!1,type:"danger",title:"",content:""}}},computed:{title:function(){return this.data.supplierId?"编辑供应商":"新增供应商"}},methods:{validateSuppliers:function(){var t=r.crmValidator.validateSupplierName(this.data.name);if(!t.ok)return t.errorMsg},confirmSubmit:function(){this.buttonEnabled&&(this.buttonEnabled=!1,this.data.supplierId?this.editSuppliers():this.addSuppliers())},addSuppliers:function(){var t=this,e=this.validateSuppliers();if(e)return this.dataForPopupTips.show=!0,this.dataForPopupTips.title="输入有误",this.dataForPopupTips.content=e,void(this.buttonEnabled=!0);var i="/api/v2/admin/suppliers/add",a={name:this.data.name,product:this.data.product,region:this.data.region,address:this.data.address,contact:this.data.contact};this.$http.post(i,a).then(function(e){e.data.result&&0!==e.data.result?s.callback.success(e.data):(t.show=!1,t.$dispatch("add-supplier")),t.buttonEnabled=!0},function(e){s.callback.error(e),t.buttonEnabled=!0})},editSuppliers:function(){var t=this,e=this.validateSuppliers();if(e)return this.dataForPopupTips.show=!0,this.dataForPopupTips.title="输入有误",this.dataForPopupTips.content=e,void(this.buttonEnabled=!0);var i="/api/v2/admin/suppliers/edit?id="+this.data.supplierId,a={name:this.data.name,product:this.data.product,region:this.data.region,address:this.data.address,contact:this.data.contact};this.$http.put(i,a).then(function(e){e.data.result&&0!==e.data.result?s.callback.success(e.data):(t.show=!1,t.$dispatch("edit-supplier")),t.buttonEnabled=!0},function(e){s.callback.error(e),t.buttonEnabled=!0})},closeDialog:function(){this.show=!1}}}},222:function(t,e){t.exports=' <div class=modal v-show=show _v-98580cf0=""> <div class=modal-dialog _v-98580cf0=""> <div class=modal-content _v-98580cf0=""> <div class=modal-header _v-98580cf0=""> <button type=button class=close @click=closeDialog _v-98580cf0="">×</button> <h4 class=modal-title _v-98580cf0="">{{title}}</h4> </div> <div class=modal-body _v-98580cf0=""> <form class=form-horizontal _v-98580cf0=""> <div class=form-group _v-98580cf0=""> <label class="col-lg-4 control-label" for=supplierName _v-98580cf0="">供应商名称<span class=text-danger _v-98580cf0="">*</span>：</label> <div class=col-lg-6 _v-98580cf0=""> <input class="form-control input-sm" id=supplierName type=text v-model=data.name _v-98580cf0=""> </div> </div> <div class=form-group _v-98580cf0=""> <label class="col-lg-4 control-label" for=supplyProduct _v-98580cf0="">供应商品：</label> <div class=col-lg-6 _v-98580cf0=""> <input class="form-control input-sm" id=supplyProduct type=text v-model=data.product _v-98580cf0=""> </div> </div> <div class=form-group _v-98580cf0=""> <label class="col-lg-4 control-label" for=supplyArea _v-98580cf0="">覆盖范围：</label> <div class=col-lg-6 _v-98580cf0=""> <input class="form-control input-sm" id=supplyArea type=text v-model=data.region _v-98580cf0=""> </div> </div> <div class=form-group _v-98580cf0=""> <label class="col-lg-4 control-label" for=supplierAddress _v-98580cf0="">所在地址：</label> <div class=col-lg-6 _v-98580cf0=""> <input class="form-control input-sm" id=supplierAddress type=text v-model=data.address _v-98580cf0=""> </div> </div> <div class=form-group _v-98580cf0=""> <label class="col-lg-4 control-label" for=supplierContact _v-98580cf0="">联系人：</label> <div class=col-lg-6 _v-98580cf0=""> <input class="form-control input-sm" id=supplierContact type=text v-model=data.contact _v-98580cf0=""> </div> </div> </form> </div> <div class=modal-footer _v-98580cf0=""> <button type=button class="btn btn-primary" :disabled=!buttonEnabled @click=confirmSubmit _v-98580cf0="">确定</button> </div> </div> </div> <popup-tips :show.sync=dataForPopupTips.show :tips-type=dataForPopupTips.type :tips-title=dataForPopupTips.title :tips-content=dataForPopupTips.content _v-98580cf0=""></popup-tips> </div> ';
},223:function(t,e){t.exports=' <div class=container-fluid _v-3ed58512=""> <ul class=breadcrumb _v-3ed58512=""> <li _v-3ed58512="">CRM系统</li> <li _v-3ed58512="">供应商管理</li> </ul> <a class="pull-right btn btn-info btn-sm" v-if=permissionList.addSupplier @click=addSupplier _v-3ed58512="">添加供应商</a> <p class=clearfix _v-3ed58512=""></p> <table class="table table-bordered table-hover supplier-table" _v-3ed58512=""> <thead _v-3ed58512=""> <tr _v-3ed58512=""> <th style=width:5% _v-3ed58512="">ID</th> <th style=width:12% _v-3ed58512="">供应商名称</th> <th style=width:16% _v-3ed58512="">供应商品</th> <th style=width:15% _v-3ed58512="">覆盖范围</th> <th style=width:15% _v-3ed58512="">所在地</th> <th style=width:12% _v-3ed58512="">联系人</th> <th style=width:12% _v-3ed58512="">下单数量/金额</th> <th style=width:13% _v-3ed58512="">操作</th> </tr> </thead> <tbody _v-3ed58512=""> <tr v-for="supplierItem of supplierList" _v-3ed58512=""> <td _v-3ed58512="">{{supplierItem.id}}</td> <td _v-3ed58512="">{{supplierItem.name}}</td> <td _v-3ed58512="">{{supplierItem.product}}</td> <td _v-3ed58512="">{{supplierItem.region}}</td> <td _v-3ed58512="">{{supplierItem.address}}</td> <td _v-3ed58512="">{{supplierItem.contact}}</td> <td _v-3ed58512="">{{supplierItem.order_count}}/{{supplierItem.total_cost | realPrice}}元</td> <td _v-3ed58512=""> <a class=btn-link v-if=permissionList.editSupplier @click=editSupplier(supplierItem) _v-3ed58512="">编辑</a> <a class=btn-link style=margin-left:20px v-if=permissionList.deleteSupplier @click=showDeleteSupplierDialog(supplierItem) _v-3ed58512="">删除</a> </td> </tr> </tbody> </table> <edit-or-add-supplier-dialog :show.sync=dataForEditOrAddSupplierDialog.show :data=dataForEditOrAddSupplierDialog.data _v-3ed58512=""></edit-or-add-supplier-dialog> <popup-dialog :show-dialog.sync=dataForPopupDialog.show :dialog-title=dataForPopupDialog.title :dialog-content=dataForPopupDialog.content _v-3ed58512=""></popup-dialog> </div> '}});
//# sourceMappingURL=12.js.map